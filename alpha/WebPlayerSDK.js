// See the licenses.txt file for open source licenses: https://cloudfront.xp-assets.aiv-cdn.net/packages/ATVWebPlayerSDK-1.0/prod/licenses.txt 
var WebPlayerSDKLoader=function(){'use strict';var a='undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:'undefined'!=typeof global?global:'undefined'!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,'default')?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var r,s=t(function(c){!function(e){var r,s={};s.VERSION="1.4.1";var n={},t=function(e,t){return function(){return t.apply(e,arguments)}},i=function(){var e,t,r=arguments,n=r[0];for(t=1;t<r.length;t++)for(e in r[t])e in n||!r[t].hasOwnProperty(e)||(n[e]=r[t][e]);return n},o=function(e,t){return{value:e,name:t}};s.DEBUG=o(1,'DEBUG'),s.INFO=o(2,'INFO'),s.TIME=o(3,'TIME'),s.WARN=o(4,'WARN'),s.ERROR=o(8,'ERROR'),s.OFF=o(99,'OFF');var a=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};a.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(s.DEBUG,arguments)},info:function(){this.invoke(s.INFO,arguments)},warn:function(){this.invoke(s.WARN,arguments)},error:function(){this.invoke(s.ERROR,arguments)},time:function(e){'string'==typeof e&&0<e.length&&this.invoke(s.TIME,[e,'start'])},timeEnd:function(e){'string'==typeof e&&0<e.length&&this.invoke(s.TIME,[e,'end'])},invoke:function(e,t){r&&this.enabledFor(e)&&r(t,i({level:e},this.context))}};var u,l=new a({filterLevel:s.OFF});(u=s).enabledFor=t(l,l.enabledFor),u.debug=t(l,l.debug),u.time=t(l,l.time),u.timeEnd=t(l,l.timeEnd),u.info=t(l,l.info),u.warn=t(l,l.warn),u.error=t(l,l.error),u.log=u.info,s.setHandler=function(e){r=e},s.setLevel=function(e){for(var t in l.setLevel(e),n)n.hasOwnProperty(t)&&n[t].setLevel(e)},s.getLevel=function(){return l.getLevel()},s.get=function(e){return n[e]||(n[e]=new a(i({name:e},l.context)))},s.createDefaultHandler=function(i){(i=i||{}).formatter=i.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var o={},a=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(e,t){e=Array.prototype.slice.call(e);var r,n=console.log;t.level===s.TIME?(r=(t.name?'['+t.name+'] ':'')+e[0],'start'===e[1]?console.time?console.time(r):o[r]=(new Date).getTime():console.timeEnd?console.timeEnd(r):a(n,[r+': '+((new Date).getTime()-o[r])+'ms'])):(t.level===s.WARN&&console.warn?n=console.warn:t.level===s.ERROR&&console.error?n=console.error:t.level===s.INFO&&console.info?n=console.info:t.level===s.DEBUG&&console.debug&&(n=console.debug),i.formatter(e,t),a(n,e))}},s.useDefaults=function(e){s.setLevel(e&&e.defaultLevel||s.DEBUG),s.setHandler(s.createDefaultHandler(e))},c.exports?c.exports=s:(s._prevLogger=e.Logger,s.noConflict=function(){return e.Logger=s._prevLogger,s},e.Logger=s)}(a)});(r||(r={})).RapidRecap="RapidRecap";var n,i,o=r;(i=n||(n={})).ContentStateChange="ContentStateChange",i.PlaybackStateChange="PlaybackStateChange",i.TimeDataChange="TimeDataChange",i.TimelineChange="TimelineChange",i.TimelineEnded="TimelineEnded",i.Error="Error",i.ContentError="ContentError",i.FullscreenChange="FullscreenChange",i.InterfaceStatusChange="InterfaceStatusChange",i.Seek="Seek",i.Close="Close";var u,l,c=n;(l=u||(u={})).AdReporting="AdReporting",l.MetricsReporting="MetricsReporting",l.PictureInPicture="PictureInPicture",l.Stream="Stream",l.Troubleshooting="Troubleshooting",l.VideoPreview="VideoPreview",l.Volume="Volume",l.GCast="GCast",l.UIConfig="UIConfig",l.UIDisplayStatus="UIDisplayStatus",l.UserActivity="UserActivity";var f,p,d=u;(p=f||(f={})).Connected="Connected",p.Disconnected="Disconnected";var h,m,y=f,v={bandwidthCap:1/0};(m=h||(h={})).CoverAndCropLayout="CoverAndCropLayout",m.InlineLockedAspectRatio="InlineLockedAspectRatio",m.Main="Main",m.ScaledDownLive="ScaledDownLive",m.ScaledDownVOD="ScaledDownVOD";var g,b=h;(g||(g={})).LoadError="LoadError";var _,w,S=g;(w=_||(_={})).AmazonVideoPlayer="AmazonVideoPlayer",w.ChromelessPlayer="ChromelessPlayer",w.GCastPlayer="GCastPlayer",w.LocalContentManager="LocalContentManager",w.Player="Player";var E,T,O=_,P=function(){function e(){}return e.getActiveWeblabs=function(){return[e.HTML5_ENABLE_CHROMIUM,e.HASTUR_IE,e.HTML5_PICTUREINPICTURE]},e.HTML5_ENABLE_CHROMIUM="AIV_HTML5_ENABLE_CHROMIUM_251485",e.HASTUR_IE="AIV_HTML5_HASTUR_LAUNCH_IE_227137",e.HTML5_PICTUREINPICTURE="AIV_HTML5_PICTUREINPICTURE_LAUNCH_309146",e}();(T=E||(E={}))[T.C=0]="C",T[T.T1=1]="T1",T[T.T2=2]="T2",T[T.T3=3]="T3",T[T.T4=4]="T4",T[T.T5=5]="T5",T[T.T6=6]="T6",T[T.T7=7]="T7",T[T.T8=8]="T8",T[T.T9=9]="T9",T[T.T10=10]="T10",T[T.T11=11]="T11",T[T.T12=12]="T12",T[T.T13=13]="T13",T[T.T14=14]="T14",T[T.T15=15]="T15",T[T.T16=16]="T16",T[T.T17=17]="T17",T[T.T18=18]="T18",T[T.T19=19]="T19",T[T.T20=20]="T20";var I=E,R=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WeblabTreatment=t.Weblabs=t.WebPlayerSDKFeatures=t.WebPlayerSDKEvent=t.Layouts=t.DataUsageDefault=t.CastState=t.WebPlayerFeatures=t.WebPlayerEvent=t.PlaybackExperience=void 0,t.PlaybackExperience=o,t.WebPlayerEvent=c,t.WebPlayerFeatures=d,t.CastState=y,t.DataUsageDefault=v,t.Layouts=b,t.WebPlayerSDKEvent=S,t.WebPlayerSDKFeatures=O,t.Weblabs=P,t.WeblabTreatment=I});e(R);R.WeblabTreatment,R.Weblabs,R.WebPlayerSDKFeatures,R.WebPlayerSDKEvent,R.Layouts,R.DataUsageDefault,R.CastState,R.WebPlayerFeatures,R.WebPlayerEvent,R.PlaybackExperience;var A=t(function(e,t){var n,i=a&&a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(r){function e(){var e=this.constructor,t=r.call(this,"The operation was cancelled")||this;return t.name="CancelError",Object.setPrototypeOf(t,e.prototype),t}return i(e,r),e}(Error);t.CancelError=r});e(A);A.CancelError;var k=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(){}return t.setTaskQueue=function(e){t.taskQueue=e},t.enqueue=function(e){t.taskQueue.enqueue(e)},t}();t.TaskQueueManager=r});e(k);k.TaskQueueManager;var C=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.Pending=0]="Pending",n[n.Fulfilled=1]="Fulfilled",n[n.Rejected=2]="Rejected";var i=s.get("Promise"),o=function(){function u(e){var t=this;if(this.state=r.Pending,this.value=void 0,this.error=void 0,this.handlers=[],this.handled=!1,this.resolve=function(r){if(t!==r)try{var n=u.getThen(r);null!=n?t.doResolve(function(e,t){return n.call(r,e,t)},t.resolve,t.reject):t.fulfill(r)}catch(e){t.reject(e)}else t.reject(new TypeError("Resolving promise with itself not allowed"))},this.fulfill=function(e){t.state=r.Fulfilled,t.value=e,t.handlers.forEach(function(e){t.handle(e)}),t.handlers=[]},this.reject=function(e){t.state=r.Rejected,t.error=e,0===t.handlers.length?k.TaskQueueManager.enqueue(function(){0!==t.handlers.length||t.handled||i.warn("Unhandled promise rejection",e)}):(t.handlers.forEach(function(e){t.handle(e)}),t.handlers=[])},null==e||"function"!=typeof e)throw new Error("Promise resolved "+e+" is not a function");this.doResolve(e,this.resolve,this.reject)}return u.resolve=function(t){return new u(function(e){e(t)})},u.reject=function(r){return new u(function(e,t){t(r)})},u.all=function(s){return Array.isArray(s)?new u(function(r,n){var i=[],o=s.length,a=0;if(0!==o)for(var e=function(t){var e=s[t];(e instanceof u?e:u.resolve(e)).then(function(e){i[t]=e,++a===o&&r(i)},n)},t=0;t<o;t++)e(t);else r([])}):u.reject(new TypeError("Not an array of promises"))},u.race=function(o){return Array.isArray(o)?new u(function(e,t){for(var r=0,n=o;r<n.length;r++){var i=n[r];(i instanceof u?i:u.resolve(i)).then(e,t)}}):u.reject(new TypeError("Not an array of promises"))},u.prototype.then=function(n,i){var e=this;return new u(function(t,r){e.done(function(e){try{t("function"==typeof n?n(e):e)}catch(e){r(e)}},function(e){try{"function"==typeof i?t(i(e)):r(e)}catch(e){r(e)}})})},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.done=function(e,t){this.handle({onFulfilled:e,onRejected:t})},u.getThen=function(e){var t=typeof e;if(("object"===t||"function"===t)&&null!==e){var r=e.then;if("function"==typeof r)return r}return null},u.prototype.doResolve=function(e,t,r){var n=!1;try{e(function(e){n||(n=!0,t(e))},function(e){n||(n=!0,r(e))})}catch(e){if(n)return;n=!0,r(e)}},u.prototype.handle=function(e){var t=this;this.state===r.Pending?(this.handlers.push(e),20===this.handlers.length&&i.warn("Possible promise leak detected: A promise object has now 20 handlers!",(new Error).stack)):(this.state===r.Fulfilled?k.TaskQueueManager.enqueue(function(){e.onFulfilled(t.value)}):k.TaskQueueManager.enqueue(function(){e.onRejected(t.error)}),this.handled=!0)},u}();t.Promise=o});e(C);C.Promise;var D=t(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PromisePolyfill=r,"undefined"!=typeof Promise?t.PromisePolyfill=r=Promise:t.PromisePolyfill=r=C.Promise});e(D);D.PromisePolyfill;var x=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function r(e,t){void 0===t&&(t=D.PromisePolyfill);var r=this;this.wasRequested=!1,this.cancel=function(){r.wasRequested||(r.wasRequested=!0,r.resolvePromise(new A.CancelError))},this.backingPromise=new t(function(e,t){r.resolvePromise=e}),e(this.cancel)}return r.prototype.throwIfRequested=function(){if(this.wasRequested)throw new A.CancelError},Object.defineProperty(r.prototype,"requested",{get:function(){return this.wasRequested},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this.backingPromise},enumerable:!0,configurable:!0}),r.source=function(e){var t;return void 0===e&&(e=D.PromisePolyfill),{token:new r(function(e){t=e},e),cancel:t}},r}();t.CancelToken=r});e(x);x.CancelToken;var M=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){var r=this;this.backingPromise=new z.Promise(function(e,t){r.resolvePromise=e,r.rejectPromise=t})}return e.prototype.resolve=function(e){this.resolvePromise(e)},e.prototype.reject=function(e){this.rejectPromise(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this.backingPromise},enumerable:!0,configurable:!0}),e}();t.Deferred=r});e(M);M.Deferred;var L=t(function(B,q){(function(){var e=this,t=e._,n=Array.prototype,a=Object.prototype,r=Function.prototype,i=n.push,u=n.slice,f=a.toString,o=a.hasOwnProperty,s=Array.isArray,l=Object.keys,c=r.bind,p=Object.create,d=function(){},h=function(e){return e instanceof h?e:this instanceof h?void(this._wrapped=e):new h(e)};B.exports&&(q=B.exports=h),(q._=h).VERSION='1.8.3';var m=function(i,o,e){if(void 0===o)return i;switch(null==e?3:e){case 1:return function(e){return i.call(o,e)};case 2:return function(e,t){return i.call(o,e,t)};case 3:return function(e,t,r){return i.call(o,e,t,r)};case 4:return function(e,t,r,n){return i.call(o,e,t,r,n)}}return function(){return i.apply(o,arguments)}},y=function(e,t,r){return null==e?h.identity:h.isFunction(e)?m(e,t,r):h.isObject(e)?h.matcher(e):h.property(e)};h.iteratee=function(e,t){return y(e,t,1/0)};var v=function(u,l){return function(e){var t=arguments.length;if(t<2||null==e)return e;for(var r=1;r<t;r++)for(var n=arguments[r],i=u(n),o=i.length,a=0;a<o;a++){var s=i[a];l&&void 0!==e[s]||(e[s]=n[s])}return e}},g=function(e){if(!h.isObject(e))return{};if(p)return p(e);d.prototype=e;var t=new d;return d.prototype=null,t},b=function(t){return function(e){return null==e?void 0:e[t]}},_=Math.pow(2,53)-1,w=b('length'),S=function(e){var t=w(e);return'number'==typeof t&&0<=t&&t<=_};function E(s){return function(e,t,r,n){t=m(t,n,4);var i=!S(e)&&h.keys(e),o=(i||e).length,a=0<s?0:o-1;return arguments.length<3&&(r=e[i?i[a]:a],a+=s),function(e,t,r,n,i,o){for(;0<=i&&i<o;i+=s){var a=n?n[i]:i;r=t(r,e[a],a,e)}return r}(e,t,r,i,a,o)}}h.each=h.forEach=function(e,t,r){var n,i;if(t=m(t,r),S(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=h.keys(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e},h.map=h.collect=function(e,t,r){t=y(t,r);for(var n=!S(e)&&h.keys(e),i=(n||e).length,o=Array(i),a=0;a<i;a++){var s=n?n[a]:a;o[a]=t(e[s],s,e)}return o},h.reduce=h.foldl=h.inject=E(1),h.reduceRight=h.foldr=E(-1),h.find=h.detect=function(e,t,r){var n;if(void 0!==(n=S(e)?h.findIndex(e,t,r):h.findKey(e,t,r))&&-1!==n)return e[n]},h.filter=h.select=function(e,n,t){var i=[];return n=y(n,t),h.each(e,function(e,t,r){n(e,t,r)&&i.push(e)}),i},h.reject=function(e,t,r){return h.filter(e,h.negate(y(t)),r)},h.every=h.all=function(e,t,r){t=y(t,r);for(var n=!S(e)&&h.keys(e),i=(n||e).length,o=0;o<i;o++){var a=n?n[o]:o;if(!t(e[a],a,e))return!1}return!0},h.some=h.any=function(e,t,r){t=y(t,r);for(var n=!S(e)&&h.keys(e),i=(n||e).length,o=0;o<i;o++){var a=n?n[o]:o;if(t(e[a],a,e))return!0}return!1},h.contains=h.includes=h.include=function(e,t,r,n){return S(e)||(e=h.values(e)),('number'!=typeof r||n)&&(r=0),0<=h.indexOf(e,t,r)},h.invoke=function(e,r){var n=u.call(arguments,2),i=h.isFunction(r);return h.map(e,function(e){var t=i?r:e[r];return null==t?t:t.apply(e,n)})},h.pluck=function(e,t){return h.map(e,h.property(t))},h.where=function(e,t){return h.filter(e,h.matcher(t))},h.findWhere=function(e,t){return h.find(e,h.matcher(t))},h.max=function(e,n,t){var r,i,o=-1/0,a=-1/0;if(null==n&&null!=e)for(var s=0,u=(e=S(e)?e:h.values(e)).length;s<u;s++)r=e[s],o<r&&(o=r);else n=y(n,t),h.each(e,function(e,t,r){i=n(e,t,r),(a<i||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},h.min=function(e,n,t){var r,i,o=1/0,a=1/0;if(null==n&&null!=e)for(var s=0,u=(e=S(e)?e:h.values(e)).length;s<u;s++)(r=e[s])<o&&(o=r);else n=y(n,t),h.each(e,function(e,t,r){((i=n(e,t,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},h.shuffle=function(e){for(var t,r=S(e)?e:h.values(e),n=r.length,i=Array(n),o=0;o<n;o++)(t=h.random(0,o))!==o&&(i[o]=i[t]),i[t]=r[o];return i},h.sample=function(e,t,r){return null==t||r?(S(e)||(e=h.values(e)),e[h.random(e.length-1)]):h.shuffle(e).slice(0,Math.max(0,t))},h.sortBy=function(e,n,t){return n=y(n,t),h.pluck(h.map(e,function(e,t,r){return{value:e,index:t,criteria:n(e,t,r)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(n<r||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),'value')};var T=function(a){return function(n,i,e){var o={};return i=y(i,e),h.each(n,function(e,t){var r=i(e,t,n);a(o,e,r)}),o}};h.groupBy=T(function(e,t,r){h.has(e,r)?e[r].push(t):e[r]=[t]}),h.indexBy=T(function(e,t,r){e[r]=t}),h.countBy=T(function(e,t,r){h.has(e,r)?e[r]++:e[r]=1}),h.toArray=function(e){return e?h.isArray(e)?u.call(e):S(e)?h.map(e,h.identity):h.values(e):[]},h.size=function(e){return null==e?0:S(e)?e.length:h.keys(e).length},h.partition=function(e,n,t){n=y(n,t);var i=[],o=[];return h.each(e,function(e,t,r){(n(e,t,r)?i:o).push(e)}),[i,o]},h.first=h.head=h.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:h.initial(e,e.length-t)},h.initial=function(e,t,r){return u.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},h.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:h.rest(e,Math.max(0,e.length-t))},h.rest=h.tail=h.drop=function(e,t,r){return u.call(e,null==t||r?1:t)},h.compact=function(e){return h.filter(e,h.identity)};var O=function(e,t,r,n){for(var i=[],o=0,a=n||0,s=w(e);a<s;a++){var u=e[a];if(S(u)&&(h.isArray(u)||h.isArguments(u))){t||(u=O(u,t,r));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else r||(i[o++]=u)}return i};function P(o){return function(e,t,r){t=y(t,r);for(var n=w(e),i=0<o?0:n-1;0<=i&&i<n;i+=o)if(t(e[i],i,e))return i;return-1}}function I(o,a,s){return function(e,t,r){var n=0,i=w(e);if('number'==typeof r)0<o?n=0<=r?r:Math.max(r+i,n):i=0<=r?Math.min(r+1,i):r+i+1;else if(s&&r&&i)return e[r=s(e,t)]===t?r:-1;if(t!=t)return 0<=(r=a(u.call(e,n,i),h.isNaN))?r+n:-1;for(r=0<o?n:i-1;0<=r&&r<i;r+=o)if(e[r]===t)return r;return-1}}h.flatten=function(e,t){return O(e,t,!1)},h.without=function(e){return h.difference(e,u.call(arguments,1))},h.uniq=h.unique=function(e,t,r,n){h.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=y(r,n));for(var i=[],o=[],a=0,s=w(e);a<s;a++){var u=e[a],l=r?r(u,a,e):u;t?(a&&o===l||i.push(u),o=l):r?h.contains(o,l)||(o.push(l),i.push(u)):h.contains(i,u)||i.push(u)}return i},h.union=function(){return h.uniq(O(arguments,!0,!0))},h.intersection=function(e){for(var t=[],r=arguments.length,n=0,i=w(e);n<i;n++){var o=e[n];if(!h.contains(t,o)){for(var a=1;a<r&&h.contains(arguments[a],o);a++);a===r&&t.push(o)}}return t},h.difference=function(e){var t=O(arguments,!0,!0,1);return h.filter(e,function(e){return!h.contains(t,e)})},h.zip=function(){return h.unzip(arguments)},h.unzip=function(e){for(var t=e&&h.max(e,w).length||0,r=Array(t),n=0;n<t;n++)r[n]=h.pluck(e,n);return r},h.object=function(e,t){for(var r={},n=0,i=w(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},h.findIndex=P(1),h.findLastIndex=P(-1),h.sortedIndex=function(e,t,r,n){for(var i=(r=y(r,n,1))(t),o=0,a=w(e);o<a;){var s=Math.floor((o+a)/2);r(e[s])<i?o=s+1:a=s}return o},h.indexOf=I(1,h.findIndex,h.sortedIndex),h.lastIndexOf=I(-1,h.findLastIndex),h.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i};var R=function(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=g(e.prototype),a=e.apply(o,i);return h.isObject(a)?a:o};h.bind=function(e,t){if(c&&e.bind===c)return c.apply(e,u.call(arguments,1));if(!h.isFunction(e))throw new TypeError('Bind must be called on a function');var r=u.call(arguments,2),n=function(){return R(e,n,t,this,r.concat(u.call(arguments)))};return n},h.partial=function(i){var o=u.call(arguments,1),a=function(){for(var e=0,t=o.length,r=Array(t),n=0;n<t;n++)r[n]=o[n]===h?arguments[e++]:o[n];for(;e<arguments.length;)r.push(arguments[e++]);return R(i,a,this,this,r)};return a},h.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error('bindAll must be passed function names');for(t=1;t<n;t++)e[r=arguments[t]]=h.bind(e[r],e);return e},h.memoize=function(n,i){var o=function(e){var t=o.cache,r=''+(i?i.apply(this,arguments):e);return h.has(t,r)||(t[r]=n.apply(this,arguments)),t[r]};return o.cache={},o},h.delay=function(e,t){var r=u.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},h.defer=h.partial(h.delay,h,1),h.throttle=function(r,n,i){var o,a,s,u=null,l=0;i||(i={});var c=function(){l=!1===i.leading?0:h.now(),u=null,s=r.apply(o,a),u||(o=a=null)};return function(){var e=h.now();l||!1!==i.leading||(l=e);var t=n-(e-l);return o=this,a=arguments,t<=0||n<t?(u&&(clearTimeout(u),u=null),l=e,s=r.apply(o,a),u||(o=a=null)):u||!1===i.trailing||(u=setTimeout(c,t)),s}},h.debounce=function(t,r,n){var i,o,a,s,u,l=function(){var e=h.now()-s;e<r&&0<=e?i=setTimeout(l,r-e):(i=null,n||(u=t.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,s=h.now();var e=n&&!i;return i||(i=setTimeout(l,r)),e&&(u=t.apply(a,o),a=o=null),u}},h.wrap=function(e,t){return h.partial(t,e)},h.negate=function(e){return function(){return!e.apply(this,arguments)}},h.compose=function(){var r=arguments,n=r.length-1;return function(){for(var e=n,t=r[n].apply(this,arguments);e--;)t=r[e].call(this,t);return t}},h.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},h.before=function(e,t){var r;return function(){return 0<--e&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},h.once=h.partial(h.before,2);var A=!{toString:null}.propertyIsEnumerable('toString'),k=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'];function C(e,t){var r=k.length,n=e.constructor,i=h.isFunction(n)&&n.prototype||a,o='constructor';for(h.has(e,o)&&!h.contains(t,o)&&t.push(o);r--;)(o=k[r])in e&&e[o]!==i[o]&&!h.contains(t,o)&&t.push(o)}h.keys=function(e){if(!h.isObject(e))return[];if(l)return l(e);var t=[];for(var r in e)h.has(e,r)&&t.push(r);return A&&C(e,t),t},h.allKeys=function(e){if(!h.isObject(e))return[];var t=[];for(var r in e)t.push(r);return A&&C(e,t),t},h.values=function(e){for(var t=h.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n},h.mapObject=function(e,t,r){t=y(t,r);for(var n,i=h.keys(e),o=i.length,a={},s=0;s<o;s++)a[n=i[s]]=t(e[n],n,e);return a},h.pairs=function(e){for(var t=h.keys(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n},h.invert=function(e){for(var t={},r=h.keys(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t},h.functions=h.methods=function(e){var t=[];for(var r in e)h.isFunction(e[r])&&t.push(r);return t.sort()},h.extend=v(h.allKeys),h.extendOwn=h.assign=v(h.keys),h.findKey=function(e,t,r){t=y(t,r);for(var n,i=h.keys(e),o=0,a=i.length;o<a;o++)if(t(e[n=i[o]],n,e))return n},h.pick=function(e,t,r){var n,i,o={},a=e;if(null==a)return o;h.isFunction(t)?(i=h.allKeys(a),n=m(t,r)):(i=O(arguments,!1,!1,1),n=function(e,t,r){return t in r},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];n(c,l,a)&&(o[l]=c)}return o},h.omit=function(e,t,r){if(h.isFunction(t))t=h.negate(t);else{var n=h.map(O(arguments,!1,!1,1),String);t=function(e,t){return!h.contains(n,t)}}return h.pick(e,t,r)},h.defaults=v(h.allKeys,!0),h.create=function(e,t){var r=g(e);return t&&h.extendOwn(r,t),r},h.clone=function(e){return h.isObject(e)?h.isArray(e)?e.slice():h.extend({},e):e},h.tap=function(e,t){return t(e),e},h.isMatch=function(e,t){var r=h.keys(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var a=r[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var D=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof h&&(e=e._wrapped),t instanceof h&&(t=t._wrapped);var i=f.call(e);if(i!==f.call(t))return!1;switch(i){case'[object RegExp]':case'[object String]':return''+e==''+t;case'[object Number]':return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case'[object Date]':case'[object Boolean]':return+e==+t}var o='[object Array]'===i;if(!o){if('object'!=typeof e||'object'!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(s)&&s instanceof s)&&'constructor'in e&&'constructor'in t)return!1}n=n||[];for(var u=(r=r||[]).length;u--;)if(r[u]===e)return n[u]===t;if(r.push(e),n.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!D(e[u],t[u],r,n))return!1}else{var l,c=h.keys(e);if(u=c.length,h.keys(t).length!==u)return!1;for(;u--;)if(l=c[u],!h.has(t,l)||!D(e[l],t[l],r,n))return!1}return r.pop(),n.pop(),!0};h.isEqual=function(e,t){return D(e,t)},h.isEmpty=function(e){return null==e||(S(e)&&(h.isArray(e)||h.isString(e)||h.isArguments(e))?0===e.length:0===h.keys(e).length)},h.isElement=function(e){return!(!e||1!==e.nodeType)},h.isArray=s||function(e){return'[object Array]'===f.call(e)},h.isObject=function(e){var t=typeof e;return'function'===t||'object'===t&&!!e},h.each(['Arguments','Function','String','Number','Date','RegExp','Error'],function(t){h['is'+t]=function(e){return f.call(e)==='[object '+t+']'}}),h.isArguments(arguments)||(h.isArguments=function(e){return h.has(e,'callee')}),'function'!=typeof/./&&'object'!=typeof Int8Array&&(h.isFunction=function(e){return'function'==typeof e||!1}),h.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},h.isNaN=function(e){return h.isNumber(e)&&e!==+e},h.isBoolean=function(e){return!0===e||!1===e||'[object Boolean]'===f.call(e)},h.isNull=function(e){return null===e},h.isUndefined=function(e){return void 0===e},h.has=function(e,t){return null!=e&&o.call(e,t)},h.noConflict=function(){return e._=t,this},h.identity=function(e){return e},h.constant=function(e){return function(){return e}},h.noop=function(){},h.property=b,h.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},h.matcher=h.matches=function(t){return t=h.extendOwn({},t),function(e){return h.isMatch(e,t)}},h.times=function(e,t,r){var n=Array(Math.max(0,e));t=m(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n},h.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},h.now=Date.now||function(){return(new Date).getTime()};var x={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'},M=h.invert(x),L=function(t){var r=function(e){return t[e]},e='(?:'+h.keys(t).join('|')+')',n=RegExp(e),i=RegExp(e,'g');return function(e){return e=null==e?'':''+e,n.test(e)?e.replace(i,r):e}};h.escape=L(x),h.unescape=L(M),h.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),h.isFunction(n)?n.call(e):n};var N=0;h.uniqueId=function(e){var t=++N+'';return e?e+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,U={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},j=/\\|'|\r|\n|\u2028|\u2029/g,F=function(e){return'\\'+U[e]};h.template=function(o,e,t){!e&&t&&(e=t),e=h.defaults({},e,h.templateSettings);var r=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join('|')+'|$','g'),a=0,s="__p+='";o.replace(r,function(e,t,r,n,i){return s+=o.slice(a,i).replace(j,F),a=i+e.length,t?s+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?s+="'+\n((__t=("+r+"))==null?'':__t)+\n'":n&&(s+="';\n"+n+"\n__p+='"),e}),s+="';\n",e.variable||(s='with(obj||{}){\n'+s+'}\n'),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+'return __p;\n';try{var n=new Function(e.variable||'obj','_',s)}catch(e){throw e.source=s,e}var i=function(e){return n.call(this,e,h)},u=e.variable||'obj';return i.source='function('+u+'){\n'+s+'}',i},h.chain=function(e){var t=h(e);return t._chain=!0,t};var V=function(e,t){return e._chain?h(t).chain():t};h.mixin=function(r){h.each(h.functions(r),function(e){var t=h[e]=r[e];h.prototype[e]=function(){var e=[this._wrapped];return i.apply(e,arguments),V(this,t.apply(h,e))}})},h.mixin(h),h.each(['pop','push','reverse','shift','sort','splice','unshift'],function(t){var r=n[t];h.prototype[t]=function(){var e=this._wrapped;return r.apply(e,arguments),'shift'!==t&&'splice'!==t||0!==e.length||delete e[0],V(this,e)}}),h.each(['concat','join','slice'],function(e){var t=n[e];h.prototype[e]=function(){return V(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},h.prototype.valueOf=h.prototype.toJSON=h.prototype.value,h.prototype.toString=function(){return''+this._wrapped}}).call(a)}),N=(L._,t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=window),this.windowRef=e}return e.prototype.setImmediate=function(e){return this.windowRef.setImmediate(e)},e.prototype.clearImmediate=function(e){this.windowRef.clearImmediate(e)},e.isSupported=function(e){return void 0===e&&(e=window),null!=e&&L.isFunction(e.setImmediate)&&L.isFunction(e.clearImmediate)},e}();t.ImmediateComponentDirect=r}));e(N);N.ImmediateComponentDirect;var W=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function o(e,t){void 0===e&&(e=window),void 0===t&&(t="setImmediate-"+Math.random());var n=this;this.pendingHandlers={},this.nextId=1,this.onPostMessage=function(e){if(L.isString(e.data)&&0===e.data.indexOf(n.messageIdentifier)){var t=parseInt(e.data.substr(n.messageIdentifier.length)),r=n.pendingHandlers[t];null!=r&&(n.clearImmediate(t),r())}},this.windowRef=e,this.messageIdentifier=t;var r=e.location,i=r.port?":"+r.port:"";this.origin=this.isOriginValid(r.origin)?r.origin:r.protocol+"//"+r.hostname+i,e.addEventListener(o.MESSAGE_EVENT,this.onPostMessage)}return o.prototype.setImmediate=function(e){return L.isFunction(e)&&(this.pendingHandlers[this.nextId]=e,this.windowRef.postMessage(this.messageIdentifier+this.nextId,this.origin)),this.nextId++},o.prototype.clearImmediate=function(e){delete this.pendingHandlers[e]},o.isSupported=function(e){return void 0===e&&(e=window),null!=e&&L.isFunction(e.postMessage)&&L.isFunction(e.addEventListener)},o.prototype.isOriginValid=function(e){return null!=e&&-1!==e.indexOf("://")},o.MESSAGE_EVENT="message",o}();t.ImmediateComponentPostMessage=r});e(W);W.ImmediateComponentPostMessage;var U=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){void 0===e&&(e=window),this.windowRef=e}return e.prototype.setImmediate=function(e){return this.windowRef.setTimeout(e,0)},e.prototype.clearImmediate=function(e){this.windowRef.clearTimeout(e)},e.isSupported=function(e){return void 0===e&&(e=window),null!=e&&L.isFunction(e.setTimeout)&&L.isFunction(e.clearTimeout)},e}();t.ImmediateComponentTimeout=r});e(U);U.ImmediateComponentTimeout;var j=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=s.get("ImmediateComponentPromise"),r=function(){function e(e){void 0===e&&(e=window);var i=this;this.lastId=0,this.pendingIdMap={},this.pendingImmediate=!1,this.onNextMicrotask=function(){var e=i.pendingIdMap;i.pendingIdMap={},i.pendingImmediate=!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];try{e[n]()}catch(e){o.warn("Unhandled handler exception",e,e.stack)}}},this.promiseRef=e.Promise}return e.prototype.setImmediate=function(e){var t=this.lastId++;return this.pendingIdMap[t]=e,this.pendingImmediate||(this.pendingImmediate=!0,this.promiseRef.resolve().then(this.onNextMicrotask)),t},e.prototype.clearImmediate=function(e){delete this.pendingIdMap[e]},e.isSupported=function(e){return null!=e&&null!=e.Promise},e}();t.ImmediateComponentPromise=r});e(j);j.ImmediateComponentPromise;var F=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===e&&(e=[j.ImmediateComponentPromise,N.ImmediateComponentDirect,W.ImmediateComponentPostMessage,U.ImmediateComponentTimeout]),void 0===t&&(t=window),this.windowRef=t;var r=L.find(e,function(e){return e.isSupported(t)});if(null==r)throw Error("No supported immediate component type");this.immediateComponent=new r}return e.prototype.setTimeout=function(e,t){return this.windowRef.setTimeout(e,t)},e.prototype.clearTimeout=function(e){this.windowRef.clearTimeout(e)},e.prototype.setInterval=function(e,t){return this.windowRef.setInterval(e,t)},e.prototype.clearInterval=function(e){this.windowRef.clearInterval(e)},e.prototype.setImmediate=function(e){return this.immediateComponent.setImmediate(e)},e.prototype.clearImmediate=function(e){this.immediateComponent.clearImmediate(e)},e}();t.Timer=r});e(F);F.Timer;var V=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=new F.Timer;t.timer=r});e(V);V.timer;var B=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(r,n){var i=this;this.backingPromise=new D.PromisePolyfill(function(e,t){i.rejectPromise=t,i.timeoutId=V.timer.setTimeout(e,r),null!=n&&n.promise.then(function(e){null!=i.timeoutId&&(V.timer.clearTimeout(i.timeoutId),i.timeoutId=null),t(e)})})}return e.prototype.clear=function(){null!=this.timeoutId&&(V.timer.clearTimeout(this.timeoutId),this.timeoutId=null),this.rejectPromise(new A.CancelError)},Object.defineProperty(e.prototype,"promise",{get:function(){return this.backingPromise},enumerable:!0,configurable:!0}),e}();t.Delay=r});e(B);B.Delay;var q=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FINALLY=function(t){return[function(e){return D.PromisePolyfill.resolve(t()).then(function(){return e})},function(e){return D.PromisePolyfill.resolve(t()).then(function(){throw e})}]}});e(q);q.FINALLY;var H=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeCancellable=function(e,t){var r=e.promise.then(function(e){throw e});return D.PromisePolyfill.race([t,r])}});e(H);H.makeCancellable;var K=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.backingPromise=new M.Deferred,this.backingPromise.promise.catch(function(e){})}return e.prototype.resolve=function(e){this.backingPromise.resolve(e)},e.prototype.reject=function(e){this.backingPromise.reject(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this.backingPromise.promise},enumerable:!0,configurable:!0}),e}();t.SafeDeferred=r});e(K);K.SafeDeferred;var G=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.queue=[]}return e.prototype.enqueue=function(e){this.queue.push(e)},e.prototype.tick=function(){0!==this.queue.length&&this.queue.shift()()},e.prototype.runUntilEmpty=function(){for(;0<this.queue.length;)this.tick()},e.prototype.reset=function(){this.queue=[]},e}();t.SyncTaskQueue=r});e(G);G.SyncTaskQueue;var X=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s.get("TimeoutTaskQueue"),n=function(){function e(e){void 0===e&&(e=V.timer);var t=this;this.executor=function(){for(;0<t.tasks.length;){var e=t.tasks.shift();try{e()}catch(e){r.error("Unhandled exception thrown by a task: ",e,e.stack)}}t.immediate=null},this.timer=e,this.tasks=[],this.immediate=null}return e.prototype.enqueue=function(e){this.tasks.push(e),null===this.immediate&&(this.immediate=this.timer.setImmediate(this.executor))},e}();t.TimeoutTaskQueue=n});e(X);X.TimeoutTaskQueue;var z=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=A.CancelError,t.CancelToken=x.CancelToken,t.Deferred=M.Deferred,t.Delay=B.Delay,t.FINALLY=q.FINALLY,t.makeCancellable=H.makeCancellable,t.PromiseImpl=C.Promise,t.Promise=D.PromisePolyfill,t.SafeDeferred=K.SafeDeferred,t.SyncTaskQueue=G.SyncTaskQueue,t.TaskQueueManager=k.TaskQueueManager,t.TimeoutTaskQueue=X.TimeoutTaskQueue;var r=k,n=X;null!=V.timer&&r.TaskQueueManager.setTaskQueue(new n.TimeoutTaskQueue(V.timer))});e(z);z.CancelError,z.CancelToken,z.Deferred,z.Delay,z.FINALLY,z.makeCancellable,z.PromiseImpl,z.Promise,z.SafeDeferred,z.SyncTaskQueue,z.TaskQueueManager,z.TimeoutTaskQueue;var Q=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var c=s.get("EventEmitter"),r=function(){function l(){this.timer=V.timer,this.onCallbacks={},this.onceCallbacks={},this.idempotentEvents={},this.maxListeners=20}return l.onUnhandledEventListener=function(e){l.unhandledEventListenerCallback=e},l.prototype.emitSync=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=this.onCallbacks[t],i=this.onceCallbacks[t],o=[];n&&(o=o.concat(n)),i&&(o=o.concat(i),delete this.onceCallbacks[t]);for(var a=0,s=o;a<s.length;a++){var u=s[a];try{u.apply(void 0,e)}catch(e){c.error("UnhandledEventListenerError for '"+t+"' event:",e,"Stack:",e.stack),null!=l.unhandledEventListenerCallback&&l.unhandledEventListenerCallback(e,t.toString())}}},l.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.timer.setImmediate(function(){return t.emitSync.apply(t,[e].concat(r))})},l.prototype.emitIdempotent=function(e){var t=this;null==this.idempotentEvents[e]&&(this.idempotentEvents[e]=!0,this.timer.setImmediate(function(){delete t.idempotentEvents[e],t.emitSync(e)}))},l.prototype.off=function(e,t){var r=this.onCallbacks[e],n=this.onceCallbacks[e],i=!1;if(r){var o=r.length;this.inPlaceFilter(r,t),o!==r.length&&(i=!0),0===r.length&&delete this.onCallbacks[e]}n&&!i&&(this.inPlaceFilter(n,t),0===n.length&&delete this.onceCallbacks[e])},l.prototype.on=function(e,t){var r=this.onCallbacks[e];r?(r.push(t),0<this.maxListeners&&r.length>=this.maxListeners+1&&c.warn("MaxListenersExceededWarning for event \""+e+" with "+r.length+" listeners\"",(new Error).stack)):this.onCallbacks[e]=[t]},l.prototype.once=function(e,t){var r=this.onceCallbacks[e];r?r.push(t):this.onceCallbacks[e]=[t]},l.prototype.removeAllListeners=function(e){void 0===e&&(e=null),null===e?(this.onCallbacks={},this.onceCallbacks={}):(delete this.onCallbacks[e],delete this.onceCallbacks[e])},l.prototype.setMaxListeners=function(e){this.maxListeners=e},l.prototype.listeners=function(e){var t=this.onCallbacks[e],r=this.onceCallbacks[e],n=[];return t&&(n=n.concat(t)),r&&(n=n.concat(r)),n},l.prototype.inPlaceFilter=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t){e.splice(r,1);break}},l}();t.EventEmitter=r});e(Q);Q.EventEmitter;var J=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.events={},this.eventSource=e}return e.prototype.on=function(e,t){if(null!=this.events[e])throw new Error("this.events[\""+e+"\"] already exists");this.events[e]=t,this.eventSource.on(e,t)},e.prototype.off=function(e,t){delete this.events[e],this.eventSource.off(e,t)},e.prototype.removeAllListeners=function(){for(var e in this.events)this.events.hasOwnProperty(e)&&this.off(e,this.events[e])},e}();t.EventTracker=r});e(J);J.EventTracker;var Y=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var o=s.get("MulticastCallback"),r=function(){function i(){this.timer=V.timer,this.callbacks=[]}return i.onUnhandledEventListener=function(e){i.unhandledEventListenerCallback=e},i.prototype.add=function(e){this.callbacks.push(e)},i.prototype.remove=function(e){this.callbacks=L.without(this.callbacks,e)},i.prototype.removeAll=function(){this.callbacks=[]},i.prototype.getAllCallbacks=function(){return[].concat(this.callbacks)},i.prototype.invoke=function(e){var t=this;this.timer.setImmediate(function(){return t.invokeSync(e)})},i.prototype.invokeSync=function(e){for(var t=0,r=[].concat(this.callbacks);t<r.length;t++){var n=r[t];try{n(e)}catch(e){o.error("UnhandledEventListenerError: "+e+". Stack: "+e.stack),null!=i.unhandledEventListenerCallback&&i.unhandledEventListenerCallback(e)}}},i}();t.MulticastCallback=r});e(Y);Y.MulticastCallback;var Z=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});s.get("MultiplexedEventSource");var r=function(){function e(e){void 0===e&&(e=!1),this.sources=[],this.allListeners=[],this.active=null,this.bufferedCallbacks=[],this.bufferInactiveEvents=e}return e.prototype.selectSource=function(t){var e=L.find(this.sources,function(e){return e.id===t});if(null==e)throw new Error("Entry with id "+t+" doesn't exist");this.active=e.source,this.reEmitEventsForSourceId(t)},e.prototype.addSource=function(t,r){var n=this;if(null!=L.find(this.sources,function(e){return e.id===t}))throw new Error("Source with id "+t+" already exist");this.sources.push({id:t,source:r}),L.each(this.allListeners,function(e){n.listenDownstream(t,r,e)})},e.prototype.removeSource=function(t){var r=this,e=L.partition(this.sources,function(e){return e.id===t});if(0===e[0].length)throw new Error("No source with id "+t+" exists");this.sources=e[1];var n=e[0][0];L.each(this.allListeners,function(e){r.unlistenDownstream(t,n.source,e)}),this.active===n.source&&(this.active=null)},e.prototype.on=function(e,t){this.internalOn(e,t)},e.prototype.off=function(t,r){var e=L.findIndex(this.allListeners,function(e){return e.event===t&&(e.callback===r||e.onceOriginCallback===r)});if(-1!==e){var n=this.allListeners[e];this.allListeners.splice(e,1),L.each(n.downstreamListeners,function(e){e.source.off(n.event,e.callback)})}},e.prototype.once=function(r,n){var i=this,o=!1,a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.off(r,a),o||(n.apply(i,e),o=!0)};this.internalOn(r,a,n)},e.prototype.internalOn=function(e,t,r){void 0===r&&(r=null);var n={event:e,callback:t,onceOriginCallback:r,downstreamListeners:[]};this.allListeners.push(n),this.listenAllDownstreams(n)},e.prototype.listenAllDownstreams=function(t){var r=this;L.each(this.sources,function(e){r.listenDownstream(e.id,e.source,t)})},e.prototype.listenDownstream=function(n,i,o){var a=this,e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=function(){return o.callback.apply(a,e)};a.active===i?(o.onceOriginCallback&&a.off(o.event,o.callback),r()):a.bufferInactiveEvents&&a.bufferCallbackForId(n,r)};o.downstreamListeners.push({source:i,callback:e}),i.on(o.event,e)},e.prototype.unlistenDownstream=function(e,t,r){r.downstreamListeners=L.reject(r.downstreamListeners,function(e){return e.source===t&&(t.off(r.event,e.callback),!0)});var n=this.getBufferedCallbacksForId(e);null!=n&&(n.callbacks=[])},e.prototype.bufferCallbackForId=function(e,t){var r=this.getBufferedCallbacksForId(e);null==r&&(r={id:e,callbacks:[]},this.bufferedCallbacks.push(r)),r.callbacks.push(t)},e.prototype.reEmitEventsForSourceId=function(e){if(this.bufferInactiveEvents){var t=this.getBufferedCallbacksForId(e);if(null!=t&&!L.isEmpty(t.callbacks)){for(var r=0,n=t.callbacks;r<n.length;r++){(0,n[r])()}t.callbacks=[]}}},e.prototype.getBufferedCallbacksForId=function(t){return L.find(this.bufferedCallbacks,function(e){return e.id===t})},e}();t.MultiplexedEventSource=r});e(Z);Z.MultiplexedEventSource;var $=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=Q.EventEmitter,t.EventTracker=J.EventTracker,t.MulticastCallback=Y.MulticastCallback,t.MultiplexedEventSource=Z.MultiplexedEventSource});e($);$.EventEmitter,$.EventTracker,$.MulticastCallback,$.MultiplexedEventSource;var ee,te,re=function(){function t(){}return t.isClassic=function(e){switch(e){case t.DE:case t.JP:case t.UK:case t.US:return!0}return!1},t.ROE_EU="A3K6Y4MI8GDYMT",t.ROW_EU="A2MFUE2XK8ZSSY",t.ROW_FE="A15PK738MTQHSO",t.ROW_NA="ART4WZ8MWBX2Y",t.DE="A1PA6795UKMFR9",t.JP="A1VC38T7YXB528",t.UK="A1F83G8C2ARO7P",t.US="ATVPDKIKX0DER",t}(),ne=function(){function r(){}return r.isAmazon=function(e,t){return void 0===t&&(t=window),e=null==e?t.location.hostname:e,r.AMAZON_REGEX.test(e)},r.fromMarketplaceId=function(e){switch(e){case re.DE:return r.DE;case re.JP:return r.JP;case re.UK:return r.UK;case re.ROE_EU:case re.ROW_EU:case re.ROW_FE:case re.ROW_NA:return r.PRIME_VIDEO;case re.US:return r.US;default:throw new Error("Can't get AmazonFQDN for unknown MarketplaceId! Received: "+e)}},r.AMAZON_REGEX=/((.*\.|^)amazon\..*|(.*\.|^)primevideo\..*)/,r.DE="www.amazon.de",r.JP="www.amazon.co.jp",r.UK="www.amazon.co.uk",r.US="www.amazon.com",r.PRIME_VIDEO="www.primevideo.com",r}(),ie=function(){function e(){}return e.CALLIE="A1TGF7GBNNZ9EE",e.CALYPSO="A3I4VPCZR2XR3U",e.CARAT="A1ZZ32RVTQ796E",e.ELECTRA="A2LLN0UXRW4N50",e.GALILEO="ADMKNMEVNL158",e.GCAST="A2Y2Z7THWOTN8I",e.HTML5="AOAGZA014O5RE",e.HYPNOS="A11QM4H9HGV71H",e.MADELEINE="A345JHMQDGG1M5",e.QUATTRO="A24B7QXDATJDR3",e.QUAD3PAEGIS="A1DZ3LJAHJZR6U",e.STLA_QUAD="A1VPRW9K4LWVOT",e.SILVERLIGHT_MAC="A2G17C9GWLWFKO",e.SILVERLIGHT_PC="A63V4FRV3YUP9",e.WINDOWS_APP="A3OEMT9S4WNMK",e}(),oe=function(){function e(){}return e.AMAZON_MUSIC_DESKTOP_APP="094bb55c-9dd6-413c-9dd9-73999dbac44d",e.AMAZON_MUSIC_WEBSITE="6163f72e-ebf6-45a9-81b3-cc155c38039c",e.FREETIME_ECHO_SHOW="6338fbf6-3986-425e-b2a5-c31f3baa1ba4",e.FREETIME_KINDLE="367349ae-26ce-4e87-8324-99c337ebac9b",e.IMDB_CORE="ca3cfe47-e131-4ce4-8295-4299be461cd1",e.IMDB_FREE_DIVE="2f6d22e9-5c48-4a00-9bc5-448049f201da",e.IMDB_TV_STANDALONE="7941c9f4-e326-47aa-91c6-7c47222fe12d",e.IMDB_TV_WEBSITE="523b73ea-4677-4efd-8f3a-de9587850e9e",e.PV_ACTOR_DETAILS="41e7965c-89b8-4967-bdd3-74e2a8f06636",e.PV_CHANNEL_GUIDE="bdd74b62-c362-46c8-86f0-47e300702607",e.PV_CHANNEL_SUBSCRIPTION_PAGE="66d54d28-d754-4b11-b74d-427a03909d93",e.PV_DETAIL_PAGE="f22dbddb-ef2c-48c5-8876-bed0d47594fd",e.PV_DETAIL_PAGE_LIVE_EVENT="b4f777f2-3153-4c55-8aa7-4645fe264be1",e.PV_DETAIL_PAGE_ANDROID="898eb3b8-96c0-4c6b-baa3-2d253860be8c",e.PV_DETAIL_PAGE_ANDROID_MSHOP="98d383c3-632a-4872-8ef8-7cc10d033066",e.PV_FOLLOWING_ACTORS_DIRECTORS="74392e3c-4c00-479e-90c8-f4d42aae8705",e.PV_GATEWAY="511cc9af-3ecb-48fe-9825-886ebfbb6503",e.PV_MY_STUFF_HUB="54cb2f2e-e96f-4e25-9d08-ea852a40588d",e.PV_SEARCH_AND_BROWSE="47c62571-58c9-4572-9a75-52f68e019cea",e.PV_STOREFRONT="9ee9ba9b-f89c-41bb-8aa0-4db6e7f24cad",e.PV_VIDEO_LIBRARY="1e2f7321-aba1-4bd3-bdfc-a63777d869af",e.PV_VIDEO_WATCHLIST="8e377055-28b0-4475-a3e7-f909ebcad6f1",e.PV_WATCH_PARTY_BFF="4fdcb305-2013-4f53-aaf7-6d502b181225",e.PV_WATCH_PARTY_FREE_TIME="b2c9648d-2460-492f-8496-a6fb400860c1",e.PV_WATCH_PARTY_TWITCH="c05ef8ae-430b-4ec2-b8c8-a5a299e8e017",e.PV_WINDOWS_APP="933adc82-54c5-4fe0-9273-f1e188456161",e.PV_XRAY_EMBEDDED_PLAYER="d5aac186-d7bc-42e5-9c64-a9203c63a9c7",e}(),ae={aar:"aa",abk:"ab",afr:"af",aka:"ak",amh:"am",ara:"ar",arg:"an",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",cat:"ca",ces:"cs",cha:"ch",che:"ce",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",dan:"da",deu:"de",div:"dv",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fry:"fy",ful:"ff",gla:"gd",gle:"ga",glg:"gl",glv:"gv",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mah:"mh",mal:"ml",mar:"mr",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"},se=function(){function e(){}return e.BACKSPACE=8,e.DELETE=46,e.ENTER=13,e.ESC=27,e.SHIFT=16,e.SPACE=32,e.TAB=9,e.A=65,e.C=67,e.F=70,e.M=77,e.LEFT_ARROW=37,e.UP_ARROW=38,e.RIGHT_ARROW=39,e.DOWN_ARROW=40,e.START_OF_NUMBER=48,e.END_OF_NUMBER=57,e.START_OF_NUMPAD=96,e.END_OF_NUMPAD=105,e.GCAST_BACK=0,e}(),ue=function(){function n(){}return n.fromMarketplaceId=function(e){var t,r=n.getDomainFromMarketplaceId(e);switch(e){case re.ROW_NA:case re.US:t=n.US_REGION;break;case re.ROE_EU:case re.ROW_EU:case re.UK:case re.DE:t=n.EU_REGION;break;case re.ROW_FE:case re.JP:t=n.JP_REGION;break;default:throw new Error("Can't get PartnerServiceEndpoint for unknown MarketplaceId! Received: "+e)}return n.PROTOCOL+t+r},n.getDomainFromMarketplaceId=function(e){switch(e){case re.ROW_NA:case re.ROE_EU:case re.ROW_EU:case re.ROW_FE:return".primevideo.com";case re.DE:return".amazon.de";case re.JP:return".amazon.co.jp";case re.UK:return".amazon.co.uk";default:return".amazon.com"}},n.EU_REGION="atv-ps-eu",n.JP_REGION="atv-ps-fe",n.US_REGION="atv-ps",n.DOMAIN_REGEX=/.*(\.(amazon|primevideo)\..*)/,n.DEFAULT_DOMAIN=".amazon.com",n.PROTOCOL="https://",n}(),le=function(){function e(){}return e.DiagnosticsEndpointKey="diagnostics_url",e}(),ce=function(){function e(){}return e.EXTRA_SMALL_SCREEN_MAX_WIDTH=479,e.SMALL_SCREEN_MIN_WIDTH=480,e.MEDIUM_SCREEN_MIN_WIDTH=640,e.LARGE_SCREEN_MIN_WIDTH=1200,e.EXTRA_LARGE_SCREEN_MIN_WIDTH=1921,e.SCALE_FACTOR_EXTRA_SMALL=1,e.SCALE_FACTOR_SMALL=100/e.SMALL_SCREEN_MIN_WIDTH,e.SCALE_FACTOR_MEDIUM=100/e.MEDIUM_SCREEN_MIN_WIDTH,e.SCALE_FACTOR_LARGE=100/e.LARGE_SCREEN_MIN_WIDTH,e.SCALE_FACTOR_EXTRA_LARGE=100/e.EXTRA_LARGE_SCREEN_MIN_WIDTH,e.SCREEN_EXTRA_SMALL_MEDIA_QUERY="(max-width: "+e.EXTRA_SMALL_SCREEN_MAX_WIDTH+"px)",e.SCREEN_SMALL_MEDIA_QUERY="(min-width: "+e.SMALL_SCREEN_MIN_WIDTH+"px)",e.SCREEN_MEDIUM_MEDIA_QUERY="(min-width: "+e.MEDIUM_SCREEN_MIN_WIDTH+"px)",e.SCREEN_LARGE_MEDIA_QUERY="(min-width: "+e.LARGE_SCREEN_MIN_WIDTH+"px)",e.SCREEN_EXTRA_LARGE_MEDIA_QUERY="(min-width: "+e.EXTRA_LARGE_SCREEN_MIN_WIDTH+"px)",e}(),fe=function(){function e(){}return e.getActiveWeblabs=function(){return[e.HTML5_HASTUR_ACCESSIBILITY_MODAL_BUTTON,e.WATCH_CONTROL_DEVELOPMENT,e.WEB_GETPAGE_MIGRATION,e.WEB_INSIGHTS_MIGRATION_WEBLAB,e.XRAY_VOD_WEB_JANUS_LAUNCH]},e.HTML5_HASTUR_ACCESSIBILITY_MODAL_BUTTON="AIV_HTML5_HASTUR_ACCESSIBILITY_MODAL_BUTTON_373253",e.WATCH_CONTROL_DEVELOPMENT="AIV_530142",e.WEB_GETPAGE_MIGRATION="PV_XRAY_CEDAR_VPS_GETPAGE_WEB_LAUNCH_638298",e.WEB_INSIGHTS_MIGRATION_WEBLAB="XRAY_WEB_INSIGHTS_TABLE_SPLIT_742778",e.XRAY_VOD_WEB_JANUS_LAUNCH="XRAY_WEB_JANUS_LAUNCH_799801",e}();(te=ee||(ee={}))[te.C=0]="C",te[te.T1=1]="T1",te[te.T2=2]="T2",te[te.T3=3]="T3",te[te.T4=4]="T4",te[te.T5=5]="T5",te[te.T6=6]="T6",te[te.T7=7]="T7",te[te.T8=8]="T8",te[te.T9=9]="T9",te[te.T10=10]="T10",te[te.T11=11]="T11",te[te.T12=12]="T12",te[te.T13=13]="T13",te[te.T14=14]="T14",te[te.T15=15]="T15",te[te.T16=16]="T16",te[te.T17=17]="T17",te[te.T18=18]="T18",te[te.T19=19]="T19",te[te.T20=20]="T20";var pe={AmazonFQDN:ne,DeviceTypeId:ie,ClientId:oe,IsoLanguageCodeMap:ae,KeyCode:se,MarketplaceID:re,PartnerServiceEndpoint:ue,StorageKeys:le,Styling:ce,Weblabs:fe,WeblabTreatment:ee},de=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function i(e,t,r,n){(((this.is=this).a=this).an=this).baseName=e,this.target=t,this.targetName=r,(this.negated=n)||(this.not=new i(e,t,r,!0))}return i.of=function(r){return function(e,t){return new i(r,e,t)}},i.check=function(e,t){return new i(null,e,t)},i.prototype.function=function(){return this.checkType("Function")},i.prototype.object=function(){return this.checkType("Object")},i.prototype.number=function(){return this.checkType("Number")},i.prototype.string=function(){return this.checkType("String")},i.prototype.array=function(){return this.checkType("Array")},i.prototype.null=function(){return this.verify(null===this.target,"null")},i.prototype.undefined=function(){return this.verify(void 0===this.target,"undefined")},i.prototype.empty=function(){return this.verify(null===this.target||void 0===this.target||""===this.target||this.isType("Array")&&0===this.target.length||this.isType("Object")&&!this.hasProperties(),"empty")},i.prototype.exists=function(){return this.verify(void 0!==this.target&&null!==this.target,"defined and non-null")},i.prototype.true=function(){return this.verify(!0===this.target,"true")},i.prototype.false=function(){return this.verify(!1===this.target,"false")},i.prototype.checkType=function(e){return this.verify(this.isType(e),"a "+e)},i.prototype.isType=function(e){return Object.prototype.toString.call(this.target)==="[object "+e+"]"},i.prototype.hasProperties=function(){for(var e in this.target)if(this.target.hasOwnProperty(e))return!0;return!1},i.prototype.verify=function(e,t){if(this.negated?e:!e){var r=this.baseName?"["+this.baseName+"] ":"",n=this.targetName?this.targetName+" ("+this.target+")":""+this.target;throw new Error(r+"Check failed: "+n+" was "+(this.negated?"":"not ")+t)}return this.target},i}(),n=r.of,i=r.check;t.of=n,t.check=i});e(de);de.of,de.check;var he=t(function(e,u){var o={};o.hexTable=new Array(256);for(var t=0;t<256;++t)o.hexTable[t]='%'+((t<16?'0':'')+t.toString(16)).toUpperCase();u.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0,i=e.length;n<i;++n)void 0!==e[n]&&(r[n]=e[n]);return r},u.merge=function(e,t,r){if(!t)return e;if('object'!=typeof t)return Array.isArray(e)?e.push(t):'object'==typeof e?e[t]=!0:e=[e,t],e;if('object'!=typeof e)return e=[e].concat(t);Array.isArray(e)&&!Array.isArray(t)&&(e=u.arrayToObject(e,r));for(var n=Object.keys(t),i=0,o=n.length;i<o;++i){var a=n[i],s=t[a];Object.prototype.hasOwnProperty.call(e,a)?e[a]=u.merge(e[a],s,r):e[a]=s}return e},u.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g,' '))}catch(e){return t}},u.encode=function(e){if(0===e.length)return e;'string'!=typeof e&&(e=''+e);for(var t='',r=0,n=e.length;r<n;++r){var i=e.charCodeAt(r);45===i||46===i||95===i||126===i||48<=i&&i<=57||65<=i&&i<=90||97<=i&&i<=122?t+=e[r]:i<128?t+=o.hexTable[i]:i<2048?t+=o.hexTable[192|i>>6]+o.hexTable[128|63&i]:i<55296||57344<=i?t+=o.hexTable[224|i>>12]+o.hexTable[128|i>>6&63]+o.hexTable[128|63&i]:(++r,i=65536+((1023&i)<<10|1023&e.charCodeAt(r)),t+=o.hexTable[240|i>>18]+o.hexTable[128|i>>12&63]+o.hexTable[128|i>>6&63]+o.hexTable[128|63&i])}return t},u.compact=function(e,t){if('object'!=typeof e||null===e)return e;var r=(t=t||[]).indexOf(e);if(-1!==r)return t[r];if(t.push(e),Array.isArray(e)){for(var n=[],i=0,o=e.length;i<o;++i)void 0!==e[i]&&n.push(e[i]);return n}var a=Object.keys(e);for(i=0,o=a.length;i<o;++i){var s=a[i];e[s]=u.compact(e[s],t)}return e},u.isRegExp=function(e){return'[object RegExp]'===Object.prototype.toString.call(e)},u.isBuffer=function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}}),me=(he.arrayToObject,he.merge,he.decode,he.encode,he.compact,he.isRegExp,he.isBuffer,{delimiter:'&',depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,parseValues:function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0,o=n.length;i<o;++i){var a=n[i],s=-1===a.indexOf(']=')?a.indexOf('='):a.indexOf(']=')+1;if(-1===s)r[he.decode(a)]='',t.strictNullHandling&&(r[he.decode(a)]=null);else{var u=he.decode(a.slice(0,s)),l=he.decode(a.slice(s+1));Object.prototype.hasOwnProperty.call(r,u)?r[u]=[].concat(r[u]).concat(l):r[u]=l}}return r},parseObject:function(e,t,r){if(!e.length)return t;var n,i=e.shift();if('[]'===i)n=(n=[]).concat(me.parseObject(e,t,r));else{n=r.plainObjects?Object.create(null):{};var o='['===i[0]&&']'===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(o,10),s=''+a;!isNaN(a)&&i!==o&&s===o&&0<=a&&r.parseArrays&&a<=r.arrayLimit?(n=[])[a]=me.parseObject(e,t,r):n[o]=me.parseObject(e,t,r)}return n},parseKeys:function(e,t,r){if(e){r.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,'[$1]'));var n=/(\[[^\[\]]*\])/g,i=/^([^\[\]]*)/.exec(e),o=[];if(i[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(i[1])&&!r.allowPrototypes)return;o.push(i[1])}for(var a=0;null!==(i=n.exec(e))&&a<r.depth;)++a,(r.plainObjects||!Object.prototype.hasOwnProperty(i[1].replace(/\[|\]/g,''))||r.allowPrototypes)&&o.push(i[1]);return i&&o.push('['+e.slice(i.index)+']'),me.parseObject(o,t,r)}}}),ye=function(e,t){if((t=t||{}).delimiter='string'==typeof t.delimiter||he.isRegExp(t.delimiter)?t.delimiter:me.delimiter,t.depth='number'==typeof t.depth?t.depth:me.depth,t.arrayLimit='number'==typeof t.arrayLimit?t.arrayLimit:me.arrayLimit,t.parseArrays=!1!==t.parseArrays,t.allowDots='boolean'==typeof t.allowDots?t.allowDots:me.allowDots,t.plainObjects='boolean'==typeof t.plainObjects?t.plainObjects:me.plainObjects,t.allowPrototypes='boolean'==typeof t.allowPrototypes?t.allowPrototypes:me.allowPrototypes,t.parameterLimit='number'==typeof t.parameterLimit?t.parameterLimit:me.parameterLimit,t.strictNullHandling='boolean'==typeof t.strictNullHandling?t.strictNullHandling:me.strictNullHandling,''===e||null==e)return t.plainObjects?Object.create(null):{};for(var r='string'==typeof e?me.parseValues(e,t):e,n=t.plainObjects?Object.create(null):{},i=Object.keys(r),o=0,a=i.length;o<a;++o){var s=i[o],u=me.parseKeys(s,r[s],t);n=he.merge(n,u,t)}return he.compact(n)},ve=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var i=de.of("QueryString"),r=function(){function n(){}return n.getParameter=function(e,t){i(e,"name").exists();var r=n.getQueryString(t);return r.hasOwnProperty(e)?r[e]:null},n.getQueryString=function(e){if(null==e){if(void 0===location||void 0===location.search)return{};e=location.search}try{var t=ye(e.replace(/^\?/,""));return n.parseStrings(t)}catch(e){return{}}},n.parseStrings=function(e){if(L.isString(e)){if(/^true$/i.test(e))return!0;if(/^false$/i.test(e))return!1;if(/^null$/i.test(e))return null;if(/^undefined$/i.test(e))return;return/^\d+$/.test(e)?parseInt(e,10):e}if(L.isArray(e)||L.isObject(e)){var t=L.isArray(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(t[r]=this.parseStrings(e[r]));return t}return e},n}();t.QueryString=r});e(ve);ve.QueryString;var ge=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===e&&(e=12e4),void 0===t&&(t=2),void 0===r&&(r=document);var n=this;this.scriptErrorCount=0,this.scriptLoaded=!1,this.onScriptError=function(e,t,r){e&&(e.onload=e.onerror=e.onreadystatechange=null),clearTimeout(n.scriptTimerId),n.objectExists(n.scriptInfo.name)||(++n.scriptErrorCount<n.maxAttempts?(n.onNonFatal(t),n.setScript(r)):n.onFatal(t))},this.scriptTimeoutMs=e,this.maxAttempts=t,this.documentInstance=r}return e.prototype.get=function(e,t,r,n,i){void 0===i&&(i=!1),this.scriptInfo=e,this.onLoad=t,this.onNonFatal=r,this.onFatal=n,this.scriptErrorCount=0,this.scriptLoaded=!1,this.bustCache=i,clearTimeout(this.scriptTimerId),this.setScript(this.scriptInfo.url)},e.prototype.setScript=function(t){var r=this,n=this.documentInstance.createElement("script");this.scriptTimerId=setTimeout(function(){r.onScriptError(n,new Error("Script load timed out. "+r.scriptInfo.name+" for "+t),t)},this.scriptTimeoutMs);var i=(new Date).getTime();n.setAttribute("crossorigin","anonymous"),n.onload=n.onreadystatechange=function(){if(!r.scriptLoaded&&(void 0===n.readyState||"loaded"===n.readyState||"complete"===n.readyState))if(r.objectExists(r.scriptInfo.name)){clearTimeout(r.scriptTimerId),r.scriptLoaded=!0;var e=(new Date).getTime()-i;n.onload=n.onerror=n.onreadystatechange=null,r.onLoad({cached:!1,downloadMs:e,totalMs:e})}else r.onScriptError(n,new Error("Script loaded but missing result object. Expected "+r.scriptInfo.name+" for "+t),t)},n.onerror=function(){r.onScriptError(n,new Error("Script onerror fired: "+r.scriptInfo.name+" for "+t),t)};var e=this.bustCache?"?t="+(new Date).getTime():"";n.src=t+e,this.documentInstance.getElementsByTagName("head")[0].appendChild(n)},e.prototype.objectExists=function(e){return void 0!==window[e]},e}();t.JavaScriptLoader=r});e(ge);ge.JavaScriptLoader;var be=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var a=s.get("IndexedDBStorage"),r=function(){function e(e,t){void 0===t&&(t=window);var n=this;this.VERSION=1,this.dbOpenRequest=null,this.pendingDbOperations=[],this.database=null,this.onGetCallbackMap={},this.tryInitialize=function(e){n.database||!n.isSupported()?e():(n.pendingDbOperations.push(e),null==n.dbOpenRequest&&n.initialize(function(){for(var e=0,t=n.pendingDbOperations;e<t.length;e++){(0,t[e])()}n.dbOpenRequest=null,n.pendingDbOperations=[]}))},this.initialize=function(t){try{var r=n.windowRef.indexedDB.open(n.dbName,n.VERSION);(n.dbOpenRequest=r).onsuccess=function(e){try{n.database=e.target.result,n.attachDatabaseErrorListener()}catch(e){}t()},r.onupgradeneeded=function(e){e.oldVersion<1&&(n.database=e.target.result,n.attachDatabaseErrorListener(),n.database.createObjectStore(n.dbName))},r.onerror=function(e){a.error("IndexedDB open request error.",r.error),e.stopPropagation(),e.preventDefault(),t()}}catch(e){t()}},this.dbName=e,this.windowRef=t}return e.prototype.get=function(i,r){var o=this;this.onGetCallbackMap[i]=r,this.tryInitialize(function(){try{if(!o.database)return void o.tryInvokeCallback(i);var n=(new Date).getTime(),e=o.database.transaction([o.dbName],"readonly");o.attachTransactionErrorListener(e,"IndexedDB 'get' transaction error.",i);var t=e.objectStore(o.dbName).get(i);t.onsuccess=function(e){try{var t=e.target.result,r=o.onGetCallbackMap[i];null!=r&&(r(t,(new Date).getTime()-n),delete o.onGetCallbackMap[i])}catch(e){o.tryInvokeCallback(i)}},t.onerror=function(e){a.error("IndexedDB 'get' request error.",t.error),e.preventDefault(),e.stopPropagation(),o.tryInvokeCallback(i)}}catch(e){r()}})},e.prototype.set=function(t,r){var n=this;this.tryInitialize(function(){try{if(n.database){var e=n.database.transaction([n.dbName],"readwrite");n.attachTransactionErrorListener(e,"IndexedDB 'set' transaction error."),e.objectStore(n.dbName).put(r,t)}}catch(e){}})},e.prototype.clear=function(){var t=this;this.tryInitialize(function(){try{if(null!=t.database){var e=t.database.transaction([t.dbName],"readwrite");t.attachTransactionErrorListener(e,"IndexedDB 'clear' transaction error."),e.objectStore(t.dbName).clear()}}catch(e){}})},e.prototype.attachDatabaseErrorListener=function(){var r=this;null!=this.database&&(this.database.onerror=function(e){var t=e.target;a.error("IndexedDB Database error.",t.error),e.preventDefault(),e.stopPropagation(),Object.keys(r.onGetCallbackMap).forEach(function(e){return r.tryInvokeCallback(e)})})},e.prototype.attachTransactionErrorListener=function(t,r,n){var i=this;t.onerror=function(e){a.error(r,t.error),e.preventDefault(),e.stopPropagation(),null!=n&&i.tryInvokeCallback(n)}},e.prototype.tryInvokeCallback=function(e){var t=this.onGetCallbackMap[e];null!=t&&(t(),delete this.onGetCallbackMap[e])},e.prototype.isSupported=function(){return null!=this.windowRef.indexedDB},e}();t.IndexedDBStorage=r});e(be);be.IndexedDBStorage;var _e=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDBStorage=be.IndexedDBStorage});e(_e);_e.IndexedDBStorage;var we=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.JavaScript=0]="JavaScript",n[n.JSON=1]="JSON",t.ScriptType=r});e(we);we.ScriptType;var Se=t(function(e,t){var r;r=function(e){e.version='0.4.0';var a=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return'undefined'!=typeof Int32Array?new Int32Array(t):t}(),i='undefined'!=typeof Buffer;function o(e){for(var t=-1,r=0,n=e.length-7;r<n;)t=(t=(t=(t=(t=(t=(t=(t=t>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])];for(;r<n+7;)t=t>>>8^a[255&(t^e[r++])];return-1^t}e.table=a,e.bstr=function(e){if(32768<e.length&&i)return o(new Buffer(e));for(var t=-1,r=e.length-1,n=0;n<r;)t=a[255&(t^e.charCodeAt(n++))]^t>>>8,t=a[255&(t^e.charCodeAt(n++))]^t>>>8;return n===r&&(t=t>>>8^a[255&(t^e.charCodeAt(n))]),-1^t},e.buf=function(e){if(1e4<e.length)return o(e);for(var t=-1,r=0,n=e.length-3;r<n;)t=(t=(t=(t=t>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])])>>>8^a[255&(t^e[r++])];for(;r<n+3;)t=t>>>8^a[255&(t^e[r++])];return-1^t},e.str=function(e){for(var t,r,n=-1,i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))<128?n=n>>>8^a[255&(n^t)]:t<2048?n=(n=n>>>8^a[255&(n^(192|t>>6&31))])>>>8^a[255&(n^(128|63&t))]:55296<=t&&t<57344?(t=64+(1023&t),r=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^a[255&(n^(240|t>>8&7))])>>>8^a[255&(n^(128|t>>2&63))])>>>8^a[255&(n^(128|r>>6&15|(3&t)<<4))])>>>8^a[255&(n^(128|63&r))]):n=(n=(n=n>>>8^a[255&(n^(224|t>>12&15))])>>>8^a[255&(n^(128|t>>6&63))])>>>8^a[255&(n^(128|63&t))];return-1^n}},'undefined'==typeof DO_NOT_EXPORT_CRC?r(t):r({})}),Ee=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var v="X-Server-IP",r=function(){function e(e,t){void 0===e&&(e=XMLHttpRequest),void 0===t&&(t=Se.str);var y=this;this.makeXHRRequest=function(n,u,i,o,l,a,s,c,e){void 0===c&&(c=0);var f=new y.XHR;null!=e&&(f.responseType=e);var p="",d=function(e){e||(e={type:"unknown error"});var t=new Error("XHR "+e.type+" for "+n+". Status: "+f.status+", readyState: "+f.readyState),r={attempt:c,cloudfrontRequestID:f.getResponseHeader("x-amz-cf-id"),contentHash:e.contentHash,contentLength:e.contentLength,contentLengthHeader:-1!==p.indexOf("Content-Length")?f.getResponseHeader("Content-Length"):null,serverIP:-1!==p.indexOf(v)?f.getResponseHeader(v):null};0<o?(a(t,r),y.makeXHRRequest(n,u,i,--o,l,a,s,c+1)):s(t,r)},h=y.now(),m=h;f.addEventListener("readystatechange",function(){2===f.readyState&&(m=y.now())}),f.addEventListener("load",function(){if(p=f.getAllResponseHeaders(),200===f.status){var e=y.now();if("arraybuffer"===f.responseType)return void l(f.response,{cached:!1,latencyMs:m-h,downloadMs:e-m,verifyMs:null,serverIP:-1!==p.indexOf(v)?f.getResponseHeader(v):null});var t=f.responseText,r=!0,n=null,i="(not checked)";if(u){var o=y.now();r=(i=""+y.toCRC32(t))===u,n=y.now()-o}if(r)l(t,{cached:!1,latencyMs:m-h,downloadMs:e-m,verifyMs:n,serverIP:-1!==p.indexOf(v)?f.getResponseHeader(v):null});else{var a=t?t.length:0,s=0<a?"["+t.substr(0,15)+"]":"(empty)";d({type:"verify failed "+s,contentLength:a,contentHash:i})}}else d({type:"bad response"})}),f.addEventListener("error",d),f.addEventListener("timeout",d);var t=0===c?"":"?t="+y.now();f.open("GET",n+t),f.timeout=i,f.send()},this.XHR=e,this.toCRC32=t}return e.prototype.isSupported=function(){return"withCredentials"in new this.XHR},e.prototype.get=function(e,t,r,n,i,o,a,s){this.makeXHRRequest(e,a,t,r,n,i,o,0,s)},e.prototype.now=function(){return(new Date).getTime()},e}();t.SimpleURLAcquirer=r});e(Ee);Ee.SimpleURLAcquirer;var Te=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r,n){void 0===e&&(e=new ge.JavaScriptLoader),void 0===t&&(t=new Ee.SimpleURLAcquirer),void 0===r&&(r=new _e.IndexedDBStorage("ScriptStore"));var o=this;this.SCRIPT_TYPES_XHR_REQUIRED=[we.ScriptType.JSON],this.XHR_TIMEOUT_MS=12e4,this.XHR_RETRIES=2,this.loadJsonFromString=function(t,e,r){try{var n=(new Date).getTime();r.payload=JSON.parse(e),r.parseMs=(new Date).getTime()-n,r.totalMs=o.calculateTotalLoadMs(r),t.onLoad(r)}catch(e){o.onError(t,e)}},this.loadJavaScriptFromString=function(t,e,r){try{var n=new Blob([e],{type:"application/javascript"}),i={url:o.createObjectURL(n),name:t.scriptInfo.name,type:t.scriptInfo.type,version:t.scriptInfo.version};o.javaScriptLoader.get(i,function(e){r.parseMs=e.downloadMs,r.totalMs=o.calculateTotalLoadMs(r),t.onLoad(r)},t.onNonFatal,function(e){return o.onError(t,e)})}catch(e){o.onError(t,e)}},this.loadJavaScriptFromOrigin=function(e){o.javaScriptLoader.get(e.scriptInfo,e.onLoad,e.onNonFatal,e.onFatal,!0)},this.loadJsonFromOrigin=function(r){o.urlAcquirer.get(r.scriptInfo.url,o.XHR_TIMEOUT_MS,o.XHR_RETRIES,function(e,t){o.loadFromString(r,e,t)},function(e){r.onNonFatal(e)},function(e){r.onFatal(e)},r.scriptInfo.crc32)},this.javaScriptLoader=e,this.urlAcquirer=t,this.offlineStorage=r,this.loadFromStringFunctions={},this.loadFromStringFunctions[we.ScriptType.JavaScript]=this.loadJavaScriptFromString,this.loadFromStringFunctions[we.ScriptType.JSON]=this.loadJsonFromString,this.loadFromOriginFunctions={},this.loadFromOriginFunctions[we.ScriptType.JavaScript]=this.loadJavaScriptFromOrigin,this.loadFromOriginFunctions[we.ScriptType.JSON]=this.loadJsonFromOrigin,!this.isDefined(n)&&this.isDefined(window.URL)?this.createObjectURL=URL.createObjectURL:this.createObjectURL=n}return e.prototype.getContent=function(e,t){var r=this.requiresUrlAcquirer(e.scriptInfo.type);r&&!this.urlAcquirer.isSupported()?e.onFatal(new Error("URLAcquirer not supported but "+we.ScriptType[e.scriptInfo.type]+" requires it.")):!r&&this.onlySupportsOrigin()?this.loadFromOrigin(e):this.offlineStorage.get(e.scriptInfo.name,t)},e.prototype.loadFromString=function(e,t,r){var n=this.loadFromStringFunctions[e.scriptInfo.type];this.isDefined(n)?n(e,t,r):e.onFatal(new Error("No loadFromString function found for "+we.ScriptType[e.scriptInfo.type]))},e.prototype.loadFromOrigin=function(e){var t=this.loadFromOriginFunctions[e.scriptInfo.type];this.isDefined(t)?t(e):e.onFatal(new Error("No loadFromOrigin function found for "+we.ScriptType[e.scriptInfo.type]))},e.prototype.acquireNewAsset=function(r,n,i){var o=this;void 0===i&&(i=!0),this.urlAcquirer.get(r.scriptInfo.url,this.XHR_TIMEOUT_MS,this.XHR_RETRIES,function(e,t){i&&o.offlineStorage.set(r.scriptInfo.name,{version:r.scriptInfo.version,data:e}),n&&o.loadFromString(r,e,t)},function(e,t){r.onNonFatal(e,t)},function(e,t){n&&o.onError(r,e,t)},r.scriptInfo.crc32)},e.prototype.onError=function(e,t,r){e.onNonFatal(t,r),this.loadFromOrigin(e)},e.prototype.requiresUrlAcquirer=function(e){return-1!==this.SCRIPT_TYPES_XHR_REQUIRED.indexOf(e)},e.prototype.onlySupportsOrigin=function(){return!(this.isDefined(window.Blob)&&this.urlAcquirer.isSupported())},e.prototype.isDefined=function(e){return void 0!==e},e.prototype.nonNumberToZero=function(e){return"number"==typeof e?e:0},e.prototype.calculateTotalLoadMs=function(e){return this.nonNumberToZero(e.cacheLoadMs)+this.nonNumberToZero(e.latencyMs)+this.nonNumberToZero(e.downloadMs)+this.nonNumberToZero(e.verifyMs)+this.nonNumberToZero(e.parseMs)},e}();t.BaseCachingScriptLoader=r});e(Te);Te.BaseCachingScriptLoader;var Oe=t(function(e,t){var n,r=a&&a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(i){function e(e,t,r,n){return i.call(this,e,t,r,n)||this}return r(e,i),e.prototype.get=function(r,e,t,n){var i=this,o={scriptInfo:r,onLoad:e,onNonFatal:t,onFatal:n};this.getContent(o,function(e,t){e?(i.loadFromString(o,e.data,{cached:!0,cacheLoadMs:t}),e.version!==r.version&&i.acquireNewAsset(o,!1)):i.acquireNewAsset(o,!0)})},e}(Te.BaseCachingScriptLoader);t.LazyCachingScriptLoader=i});e(Oe);Oe.LazyCachingScriptLoader;var Pe=t(function(e,t){var n,r=a&&a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(i){function e(e,t,r,n){return i.call(this,e,t,r,n)||this}return r(e,i),e.prototype.get=function(r,e,t,n,i){var o=this;void 0===i&&(i=!0);var a={scriptInfo:r,onLoad:e,onNonFatal:t,onFatal:n};i?this.getContent(a,function(e,t){e&&e.version===r.version?o.loadFromString(a,e.data,{cached:!0,cacheLoadMs:t}):o.acquireNewAsset(a,!0)}):this.onlySupportsOrigin()?this.loadFromOrigin(a):this.acquireNewAsset(a,!0,!1)},e}(Te.BaseCachingScriptLoader);t.TransparentCachingScriptLoader=i});e(Pe);Pe.TransparentCachingScriptLoader;var Ie=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JavaScriptLoader=ge.JavaScriptLoader,t.LazyCachingScriptLoader=Oe.LazyCachingScriptLoader,t.ScriptType=we.ScriptType,t.SimpleURLAcquirer=Ee.SimpleURLAcquirer,t.TransparentCachingScriptLoader=Pe.TransparentCachingScriptLoader});e(Ie);Ie.JavaScriptLoader,Ie.LazyCachingScriptLoader,Ie.ScriptType,Ie.SimpleURLAcquirer,Ie.TransparentCachingScriptLoader;var Re=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=["/"];t.AssetRoots=r;try{var n=ve.QueryString.getParameter("playerGamma"),i=!0===n||1===n;t.AssetRoots=r=i?["https://cloudfront.xp-assets.aiv-cdn.net/packages/ATVWebPlayerSDK-1.0/gamma/"]:JSON.parse('{{ATVXpS3PkgRelease-AssetUrls}}')}catch(e){}t.AssetRoots=r=["https://mkellsy.github.io/alpha/"]});e(Re);Re.AssetRoots;var Ae=t(function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),(n=r||(r={}))[n.BROWSER_OUT_OF_DATE=0]="BROWSER_OUT_OF_DATE",n[n.UNSUPPORTED_BROWSER=1]="UNSUPPORTED_BROWSER",n[n.UNSUPPORTED_OS=2]="UNSUPPORTED_OS",t.UnsupportedReason=r});e(Ae);Ae.UnsupportedReason;var ke=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="Loader",n="loader_error",i=function(){function e(){}return e.createLoaderError=function(e,t){switch(void 0===t&&(t=!0),e){case Ae.UnsupportedReason.UNSUPPORTED_OS:return{code:4003,name:"UNSUPPORTED_OS",description:"Unsupported OS",message:"Video can't be watched on this device because the operating system isn't supported.",domain:r,internalCode:n};case Ae.UnsupportedReason.UNSUPPORTED_BROWSER:return{code:4004,name:"UNSUPPORTED_BROWSER",description:"Unsupported Web browser",message:"This web browser is not currently supported. Please use the latest version of one of the following web browsers: Google Chrome, Mozilla Firefox, Microsoft Edge,"+(t?"":" Windows Internet Explorer, Apple Safari,")+" or Opera.",domain:r,internalCode:n};case Ae.UnsupportedReason.BROWSER_OUT_OF_DATE:return{code:4005,name:"BROWSER_OUT_OF_DATE",description:"Browser update required",message:"A later version of this browser is required to play this video. Please update to the latest version of your browser and try again.",domain:r,internalCode:n};default:return{code:4100,name:"UNKNOWN_LOAD_ERROR",description:"Unknown loader error",message:"An unknown error occurred while loading the WebPlayerSDK.",domain:r,internalCode:n}}},e}();t.LoaderErrorCreator=i});e(ke);ke.LoaderErrorCreator;var Ce=t(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MarketplaceToConfigMap=((r={})[pe.MarketplaceID.DE]={region:"eu",marketplace:"de"},r[pe.MarketplaceID.JP]={region:"fe",marketplace:"jp"},r[pe.MarketplaceID.ROE_EU]={region:"eu",marketplace:"roe_eu"},r[pe.MarketplaceID.ROW_EU]={region:"eu",marketplace:"row_eu"},r[pe.MarketplaceID.ROW_FE]={region:"fe",marketplace:"row_fe"},r[pe.MarketplaceID.ROW_NA]={region:"na",marketplace:"row_na"},r[pe.MarketplaceID.UK]={region:"eu",marketplace:"uk"},r[pe.MarketplaceID.US]={region:"na",marketplace:"us"},r)});e(Ce);Ce.MarketplaceToConfigMap;var De=t(function(e,t){var o=a&&a.__assign||function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r={cloudfront:"cloudfront",limelight:"limelight",lvlt:"level3"},n=function(){function e(e,t){void 0===t&&(t=null),this.marketplaceConfig=Ce.MarketplaceToConfigMap[pe.MarketplaceID.US],this.marketplaceId=e,this.clientId=t,this.sessionId=(""+Math.random()).substr(2);var r=Ce.MarketplaceToConfigMap[e];null!=r&&(this.marketplaceConfig=r)}return e.prototype.reportUnsupportedReason=function(e){switch(e){case Ae.UnsupportedReason.BROWSER_OUT_OF_DATE:this.report("BrowserOutOfDate","1");break;case Ae.UnsupportedReason.UNSUPPORTED_BROWSER:this.report("UnsupportedBrowser","1");break;case Ae.UnsupportedReason.UNSUPPORTED_OS:this.report("UnsupportedOperatingSystem","1")}},e.prototype.reportDownloadError=function(e){this.reportWithCDN("XpJavaScriptDownloadError","1",e)},e.prototype.reportDownloadSuccess=function(e,t){this.reportWithCDN("XpJavaScriptDownloadTime",t+":u=ms",e)},e.prototype.reportWithCDN=function(e,t,r){this.report(e,t);var n=this.getCDN(r);null!=n&&this.report(e+"."+n,t)},e.prototype.report=function(e,t){var r="https://fls-"+this.marketplaceConfig.region+".amazon.com/1/action-impressions/1/OP/aiv-web-player/action",n="HTML5Player:."+e+"@v="+t,i={marketplace:this.marketplaceConfig.marketplace,marketplaceId:this.marketplaceId,service:"AIVWebPlayer",session:this.sessionId};(new Image).src=r+"/"+n+"?"+this.objectToQueryParamsString(o({},i,{requestId:Math.random().toString().substr(2)})),null!=this.clientId&&((new Image).src=r+"/"+n+"?"+this.objectToQueryParamsString(o({},i,{instance:this.clientId,requestId:Math.random().toString().substr(2)})))},e.prototype.getCDN=function(e){var t=this.getSubdomain(e);return null!=t&&this.isValidCDN(t)?r[t]:null},e.prototype.getSubdomain=function(e){var t=e.match("https?://([^.]+)?\\.");return null==t||null==t[1]?null:t[1]},e.prototype.objectToQueryParamsString=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},e.prototype.isValidCDN=function(e){return-1!==Object.keys(r).indexOf(e)},e}();t.TinyMetricsReporter=n});e(De);De.TinyMetricsReporter;var xe=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var c=s.get("WebPlayerSDKLoader"),r=function(){function e(e){this.blobScriptLoader=new Ie.TransparentCachingScriptLoader,this.scriptTagScriptLoader=new Ie.JavaScriptLoader,this.metricsReporter=new De.TinyMetricsReporter(e.marketplaceId,e.clientId)}return Object.defineProperty(e.prototype,"playerCacheEnabled",{get:function(){var e=ve.QueryString.getParameter("playerCache");return null==e||e},enumerable:!0,configurable:!0}),e.prototype.acquireSDK=function(){return this.tryAcquireSDK()},e.prototype.tryAcquireSDK=function(t){var o=this;void 0===t&&(t=0);var a=Re.AssetRoots[t],s={url:a+"ATVWebPlayerSDK.js",name:"ATVWebPlayerSDK",type:Ie.ScriptType.JavaScript,version:"0.0.0.0"},u=this.playerCacheEnabled?this.blobScriptLoader:this.scriptTagScriptLoader,l=Date.now();return new z.Promise(function(e,t){var r=function(){o.metricsReporter.reportDownloadSuccess(a,Date.now()-l),e(window.ATVWebPlayerSDK)},n=function(e,t){var r=o.getErrorString(e),n=JSON.stringify(t);c.error(r+", note: "+n)},i=function(e){o.metricsReporter.reportDownloadError(a),t(ke.LoaderErrorCreator.createLoaderError())};u===o.blobScriptLoader?u.get(s,r,n,i,!1):u.get(s,r,n,i)}).catch(function(e){return t===Re.AssetRoots.length-1?z.Promise.reject(e):o.tryAcquireSDK(++t)})},e.prototype.getErrorString=function(e){return e&&L.isFunction(e.toString)?e.toString():"Unknown Error"},e}();t.BundleAcquirer=r});e(xe);xe.BundleAcquirer;var Me=de.of("AmazonUrlCreator"),Le=function(){function o(e,t,r){void 0===r&&(r=window),this.marketplaceId=Me(e,"marketplaceId").exists(),this.csUrlPathMap=Me(t,"csUrlPathMap").exists(),this.windowRef=Me(r,"windowRef").exists()}return o.prototype.createCSUrl=function(e){Me(this.csUrlPathMap[e],"csUrlPathMap[csUrlPathKey]").exists();var t=this.windowRef.location.hostname,r=t,n=this.csUrlPathMap[e][r];(L.isNull(n)||L.isUndefined(n))&&(t=ne.fromMarketplaceId(this.marketplaceId),r=this.marketplaceId);var i=this.csUrlPathMap[e][r];return(L.isNull(i)||L.isUndefined(i))&&(r=o.DEFAULT_ID),t+this.csUrlPathMap[e][r]},o.prototype.createDetailPageUrl=function(e){var t=this.windowRef.location.hostname;return ne.isAmazon(t,this.windowRef)||(t=ne.fromMarketplaceId(this.marketplaceId)),t+o.DETAIL_PAGE_BASE+e},o.DEFAULT_ID="*",o.DETAIL_PAGE_BASE="/dp/",o}(),Ne=s.get("CookieStorage"),We=function(){function e(e){void 0===e&&(e=document),this.document=e}return e.prototype.get=function(t){try{if(null==this.document.cookie)return Ne.warn("Cookie is unavailable."),null;var e=L.map(this.document.cookie.split(";"),function(e){return e.split("=")}),r=L.find(e,function(e){return e[0].trim()===t});return null==r?(Ne.warn("Cannot find key "+t+" in storage"),null):(r.shift(),decodeURIComponent(r.join("=")))}catch(e){return Ne.warn("Failed to retrieve key "+t+" from storage",e),null}},e}(),Ue=function(){function e(){}return e.getPlayerSize=function(e,t,r){return void 0===r&&(r=1),{width:e*r,height:t*r}},e}(),je=de.of("DOMUtils"),Fe=function(){function e(){}return e.getAttributeOrThrow=function(e,t){je(e,"element").exists(),je(t,"attribute").exists();var r=e.getAttribute(t);if(null===r)throw new Error("Unable to get attribute '"+t+"'");return r},e.querySelectOrThrow=function(e,t){je(e,"element").exists(),je(t,"query").exists();var r=e.querySelector(t);if(null===r)throw new Error("Unable to querySelect '"+t+"'");return r},e.querySelectAllOrThrow=function(e,t){je(e,"element").exists(),je(t,"query").exists();var r=e.querySelectorAll(t);if(null===r||0===r.length)throw new Error("Unable to querySelectAll '"+t+"'");return r},e.getAttributesInNamespace=function(e,t){var r=[];if(t+=":",e.hasAttributes())for(var n=0;n<e.attributes.length;n++)e.attributes[n].name.substr(0,t.length)===t&&r.push(e.attributes[n].name);return r},e.getAttributeWithoutNamespace=function(e){var t=e.match(/.*:(.*)/);return null===t||t.length<2?e:t[1]},e}(),Ve=s.get("EnumUtils"),Be=function(){function e(){}return e.getEnumValue=function(t,e){if(null==t)return null;if(!L.isString(t))return Ve.warn("Value must be a string but was "+t),null;if(L.isEmpty(t))return Ve.warn("Value cannot be an empty string"),null;var r=[];for(var n in e)L.isNumber(e[n])&&r.push(n);var i=L.find(r,function(e){return e.toLowerCase()===t.toLowerCase()});return null==i?(Ve.warn("Value must be one of ["+r.join(",")+"], but was "+t),null):e[i]},e}(),qe=function(){function e(e){this.ephemeralIds=[],this.logger=s.get(e)}return e.prototype.log=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).log.apply(e,[this.getId()].concat(t))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).info.apply(e,[this.getId()].concat(t))},e.prototype.warn=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).warn.apply(e,[this.getId()].concat(t))},e.prototype.error=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.logger).error.apply(e,[this.getId()].concat(t))},e.prototype.setId=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.ephemeralIds=e},e.prototype.getId=function(){return L.map(this.ephemeralIds,function(e){return"["+e+"]"}).join(" ")},e}(),He=t(function(e,t){function l(e,t){return null!=e?e:t}function c(e){return void 0===e}function i(e,t){var r=e;for(var n in r)e.hasOwnProperty(n)&&(t(e,n,r[n]),null!=r[n]&&"object"==typeof r[n]&&i(r[n],t))}function f(e){return L.isObject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withDefault=l,t.exists=function(e){return null!=e},t.isNullOrUndefined=function(e){return null==e},t.nestedValue=function(e,t,r){var n;if(void 0===r&&(r=null),0===(n="string"==typeof t?t.split("."):t).length)return r;var i=L.reduce(n,function(e,t){return null==e?null:e[t]},e);return null==i?r:i},t.deepTraverse=i,t.sanitize=function(e,r){void 0===r&&(r=!1),i(e,function(e,t){(c(e[t])||r&&null===e[t])&&delete e[t]})},t.isObject=f,t.deepExtend=function e(t,r){if(null==r)return l(L.clone(t),null);if(null==t)return L.clone(r);for(var n={},i=0,o=L.union(Object.keys(t),Object.keys(r));i<o.length;i++){var a=o[i],s=t[a],u=r[a];c(s)?n[a]=L.clone(u):f(s)&&f(u)&&!L.isArray(s)&&!L.isArray(u)?n[a]=e(s,u):n[a]=l(r[a],t[a])}return n},t.deepClone=function e(t){if("object"!=typeof t||null==t)return t;var r=Array.isArray(t)?[]:{};for(var n in t)r[n]=e(t[n]);return r}});e(He);He.withDefault,He.exists,He.isNullOrUndefined,He.nestedValue,He.deepTraverse,He.sanitize,He.isObject,He.deepExtend,He.deepClone;var Ke=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.id=e.id,this.value=e,this.previousId=null,this.nextId=null};t.LinkedNodeWrapper=r;var n=function(){function u(){this.map={},this.first=null,this.last=null}return u.prototype.insertAfter=function(e,t){if(null!=e&&null==this.map[e])throw new Error("Attempting to insert an item after id "+e+", but this item does not exist.");var r=t;if(null==(r.previousId=e))r.nextId=this.first,this.first=t.id;else{var n=this.map[e];r.nextId=n.nextId,n.nextId=t.id}null==t.nextId?this.last=t.id:this.map[t.nextId].previousId=t.id,this.map[t.id]=t},u.prototype.remove=function(e){if(null==this.map[e])throw new Error("Attempting to remove item with id "+e+", but this item does not exist.");var t=this,r=t.map[e],n=null==r.previousId?null:t.map[r.previousId],i=null==r.nextId?null:t.map[r.nextId];delete t.map[e],null==i?(t.last=r.previousId,null==n?t.first=null:n.nextId=null):(i.previousId=r.previousId,null==n?t.first=r.nextId:n.nextId=r.nextId)},u.prototype.removeRange=function(e,t){var r=this.map[e],n=this.map[t];if(null==r||null==n)throw new Error("Could not resolve range ["+e+"-"+t+"]");var i=new u,o=null==r.previousId?null:this.map[r.previousId],a=null==n.nextId?null:this.map[n.nextId];null==o?this.first=n.nextId:o.nextId=n.nextId,null==a?this.last=r.previousId:a.previousId=r.previousId,n.nextId=null,r.previousId=null,i.first=e,i.last=t;for(var s=r.id;null!=s;s=i.map[s].nextId)i.map[s]=this.map[s],delete this.map[s];return i},u.prototype.splice=function(e,t){if(null!=t.first&&null!=t.last){for(var r=this,n=null==e?null:this.map[e],i=null==n?this.first:n.nextId,o=null==i?null:this.map[i],a=t.first;null!=a;a=this.map[a].nextId)r.map[a]=t.map[a],delete t.map[a];if(null==n)r.first=t.first;else n.nextId=t.first,r.map[t.first].previousId=n.id;if(null==o)r.last=t.last;else o.previousId=t.last,r.map[t.last].nextId=o.id;t.first=null,t.last=null}},u}();t.SimpleLinkedMap=n});e(Ke);Ke.LinkedNodeWrapper,Ke.SimpleLinkedMap;var Ge=t(function(e,r){function t(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),t(He),t(Ke)});e(Ge);var Xe={FunctionThrottler:function(){function e(){this.timer=V.timer}return e.prototype.throttle=function(r,n){var i=null,o=null,a=null,s=null,u=function(){s=L.now(),i=null,r.apply(o,a),Ge.isNullOrUndefined(i)&&(a=o=null)},l=this;return function(){var e=L.now(),t=n-(e-(null===s?0:s));o=l,a=arguments,null===s||t<=0||n<t?(i&&(l.timer.clearTimeout(i),i=null),s=e,r.apply(o,a),Ge.isNullOrUndefined(i)&&(a=o=null)):Ge.isNullOrUndefined(i)&&(i=l.timer.setTimeout(u,t))}},e}()},ze=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FunctionThrottler=Xe.FunctionThrottler});e(ze);ze.FunctionThrottler;var Qe,Je,Ye,Ze=de.of("HTMLElementUtils"),$e=function(){function t(){}return t.addClass=function(e,t){if(void 0!==e.className){var r=e.className.split(" ");void 0===L.find(r,function(e){return e===t})&&(e.className+=" "+t)}},t.removeClass=function(e,t){if(void 0!==e.className){var r=e.className.split(" ");void 0!==L.find(r,function(e){return e===t})&&(r=L.filter(r,function(e){return e!==t}),e.className=r.join(" "))}},t.getElementsByClassName=function(e,t){return L.isUndefined(e.getElementsByClassName)?e.querySelectorAll("."+t):e.getElementsByClassName(t)},t.clickedInElement=function(e,t){Ze(e,"element").exists(),Ze(t,"event").exists();var r=e.getBoundingClientRect();return r.left<t.clientX&&r.left+e.offsetWidth>t.clientX&&r.top<t.clientY&&r.top+e.offsetHeight>t.clientY},t.isScrollable=function(e){return e.scrollHeight>e.offsetHeight+t.SCROLLABLE_MARGIN_OF_ERROR_PX},t.SCROLLABLE_MARGIN_OF_ERROR_PX=1,t}(),et="(\\d|[1-9]\\d|1\\d\\d|2([0-4]\\d|5[0-5]))",tt=new RegExp("^"+et+"\\."+et+"\\."+et+"\\."+et+"$"),rt=function(){function e(){}return e.isValidIPv4Address=function(e){return tt.test(e)},e}(),nt=s.get("WebStorage"),it=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.storage=e,this.namespace=t}return e.prototype.set=function(e,t){if(null!==this.storage){var r=this.getNamespacedKey(e);try{this.storage.setItem(r,t)}catch(e){nt.warn("Failed to save key "+r+" to storage",e)}}else nt.warn("Storage is unavailable.")},e.prototype.get=function(e){if(null===this.storage)return nt.warn("Storage is unavailable."),null;var t=this.getNamespacedKey(e);try{var r=this.storage.getItem(t);return null!=r||null!=this.namespace&&null!=(r=this.storage.getItem(e))&&this.set(e,r),r}catch(e){return nt.warn("Failed to retrieve key "+t+" from storage",e),null}},e.prototype.remove=function(e){if(null!==this.storage){var t=this.getNamespacedKey(e);try{this.storage.removeItem(t),null!=this.namespace&&this.storage.removeItem(e)}catch(e){nt.warn("Failed to remove key "+t+" from storage",e)}}else nt.warn("Storage is unavailable.")},e.prototype.removeAll=function(){if(null!==this.storage)try{this.storage.clear()}catch(e){nt.warn("Failed to clear storage",e)}else nt.warn("Storage is unavailable.")},e.prototype.getNamespacedKey=function(e){return null!=this.namespace?""+this.namespace+e:e},e}(),ot=a&&a.__extends||(Qe=function(e,t){return(Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Qe(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),at=function(t){function e(e){return void 0===e&&(e=window),t.call(this,void 0===e.localStorage?null:e.localStorage,"atvwebplayersdk_")||this}return ot(e,t),e}(it),st=s.get("MimeTypeParser");(Ye=Je||(Je={}))[Ye.ParsingType=0]="ParsingType",Ye[Ye.ParsingSubtype=1]="ParsingSubtype",Ye[Ye.ParsingParameterName=2]="ParsingParameterName",Ye[Ye.StartParsingParameterValue=3]="StartParsingParameterValue",Ye[Ye.ParsingUnquotedParameterValue=4]="ParsingUnquotedParameterValue",Ye[Ye.ParsingQuotedParameterValue=5]="ParsingQuotedParameterValue",Ye[Ye.CompleteParsingParameterValue=6]="CompleteParsingParameterValue",Ye[Ye.FinishParsingNoPendingParameter=7]="FinishParsingNoPendingParameter";var ut,lt,ct=function(){function e(){}return e.prototype.parse=function(e){var t={text:e,index:0,parameterName:"",parameterValue:"",mimeTypeObject:{type:"",subtype:"",parameters:{}}};return this.parseMimeType(t)},e.prototype.parseMimeType=function(e){for(var t=Je.ParsingType;e.index<e.text.length;)switch(t){case Je.ParsingType:t=this.parseType(e);break;case Je.ParsingSubtype:t=this.parseSubtype(e);break;case Je.ParsingParameterName:t=this.parseParameterName(e);break;case Je.StartParsingParameterValue:t=this.handleStartParsingParameterValue(e);break;case Je.CompleteParsingParameterValue:t=this.handleCompleteParsingParameterValue(e)}return this.handleEndParsing(e,t),e.mimeTypeObject},e.prototype.parseType=function(e){var t=e.text.indexOf("/");if(0<t)return e.mimeTypeObject.type=e.text.substring(e.index,t).trim(),e.index=t+1,Je.ParsingSubtype;throw new Error("Encountered malformed top type while parsing \""+e.text.substring(e.index)+"\".")},e.prototype.parseSubtype=function(e){var t=e.text.indexOf(";",e.index);return 0<t?(e.mimeTypeObject.subtype=this.extractSubtype(e,t),e.index=t+1,Je.ParsingParameterName):(e.mimeTypeObject.subtype=this.extractSubtype(e),e.index=e.text.length,Je.FinishParsingNoPendingParameter)},e.prototype.extractSubtype=function(e,t){var r=e.text.substring(e.index,t).trim();if(0===r.length)throw new Error("Encountered empty subtype while parsing \""+e.text.substring(e.index)+"\".");return r},e.prototype.parseParameterName=function(e){var t=e.text.indexOf("=",e.index);return t>e.index?(e.parameterName=this.extractParameterName(e,t),0===e.parameterName.length?(e.index=e.text.length,Je.FinishParsingNoPendingParameter):(e.index=t+1,Je.StartParsingParameterValue)):(st.warn("Encountered malformed parameter name while parsing \""+e.text.substring(e.index)+"\"."),e.index=e.text.length,Je.FinishParsingNoPendingParameter)},e.prototype.extractParameterName=function(e,t){var r=e.text.substring(e.index,t).trim();return 0===r.length?(st.warn("Encountered empty parameter name while parsing \""+e.text.substring(e.index)+"\"."),r):-1!==r.indexOf(";")?(st.warn("Encountered malformed parameter name while parsing \""+e.text.substring(e.index)+"\"."),""):r},e.prototype.handleStartParsingParameterValue=function(e){if("\""===e.text[e.index]){e.index++;var t=e.text.indexOf("\"",e.index);return t>=e.index?(e.parameterValue=e.text.substring(e.index,t),e.index=t+1,Je.CompleteParsingParameterValue):(st.warn("Encountered unbalanced quotation when parsing \""+e.text.substring(e.index)+"\"."),Je.StartParsingParameterValue)}var r=e.text.indexOf(";",e.index);return r<0&&(r=e.text.length),e.parameterValue=this.extractUnquotedParameterValue(e,r),e.index=r,Je.CompleteParsingParameterValue},e.prototype.extractUnquotedParameterValue=function(e,t){var r=e.text.substring(e.index,t).trim();return 0===r.length&&(st.warn("Encountered empty parameter value while parsing \""+e.text.substring(e.index)+"\"."),r=""),r},e.prototype.handleCompleteParsingParameterValue=function(e){var t=e.text.indexOf(";",e.index);if(t===e.index)return this.commitNameValuePair(e),e.index++,Je.ParsingParameterName;if(t<0&&0===e.text.substring(e.index).trim().length)return this.commitNameValuePair(e),e.index=e.text.length,Je.FinishParsingNoPendingParameter;throw new Error("Expected character: \";\", but encountered: \""+e.text[e.index]+"\", when completing parsing of a parameter value of text \""+e.text+"\".")},e.prototype.handleEndParsing=function(e,t){switch(t){case Je.CompleteParsingParameterValue:this.commitNameValuePair(e);break;case Je.StartParsingParameterValue:e.parameterValue="",this.commitNameValuePair(e);break;case Je.FinishParsingNoPendingParameter:case Je.ParsingParameterName:break;default:throw new Error("Ended in an invalid state: "+Je[t]+", when parsing MIME type \""+e.text+"\".")}},e.prototype.commitNameValuePair=function(e){e.mimeTypeObject.parameters[e.parameterName]=e.parameterValue},e}(),ft=function(){function e(e,t){void 0===e&&(e=Number.MIN_VALUE),void 0===t&&(t=Number.MAX_VALUE),this.minValue=e,this.maxValue=t}return e.prototype.constrain=function(e){return this.minValue>this.maxValue?e:e>this.maxValue?this.maxValue:e<this.minValue?this.minValue:e},e}(),pt=function(){function e(e){this.EXTENSION_REGEX=/(?:\.([^.]+))?$/,this.timeoutMillis=12e4,e&&0<e&&(this.timeoutMillis=e)}return e.prototype.acquire=function(e,t){var r=this.getFileExtension(e);if("js"===r)this.acquireJavaScript(e,t);else{if("css"!==r)throw new Error("Unable to acquire non-JavaScript or CSS resource: "+e);this.acquireCSS(e,t)}},e.prototype.getFileExtension=function(e){var t=this.EXTENSION_REGEX.exec(e);return t?t[1]:""},e.prototype.acquireJavaScript=function(t,r){var n,e=this,i=document.createElement("script"),o=function(e){clearTimeout(n),i&&(delete i.onload,delete i.onerror),"function"==typeof r&&r(e)};n=setTimeout(function(){o(new Error("Timed out acquiring resource after "+e.timeoutMillis+"ms: "+t))},this.timeoutMillis),i.src=t,i.onload=function(){o()},i.onerror=function(e){o(new Error("Error acquiring resource (probably doesn't exist): "+t))},document.getElementsByTagName("head")[0].appendChild(i)},e.prototype.acquireCSS=function(e,t){var r=document.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(r),"function"==typeof t&&t()},e}(),dt=a&&a.__extends||(ut=function(e,t){return(ut=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),ht=function(t){function e(e){return void 0===e&&(e=window),t.call(this,"undefined"==typeof sessionStorage?null:e.sessionStorage)||this}return dt(e,t),e}(it),mt=de.of("Strings"),yt=function(){function e(){}return e.repeat=function(e,t){return t=Math.floor(t),mt(0<=t,"count ["+t+"] >= 0").is.true(),L.isEmpty(e)?"":0===t?"":1===t?e:new Array(t+1).join(e)},e.right=function(e,t){return e.substring(e.length-t)},e}(),vt=function(){function e(e,t){this.maxLength=null!=t?t:e}return e.prototype.constrain=function(e){return e.substring(0,this.maxLength)},e}(),gt=de.of("ThrottledEventListener"),bt=function(){function e(){var e=this;this.attachedListener=null,this.executeThrottledEvent=function(){null!==e.attachedListener&&(e.attachedListener.eventTarget.removeEventListener(e.attachedListener.listenerType,e.executeThrottledEvent),setTimeout(function(){null!==e.attachedListener&&(e.attachedListener.callback(),e.attachedListener.eventTarget.addEventListener(e.attachedListener.listenerType,e.executeThrottledEvent))},e.attachedListener.pollingInterval))}}return e.prototype.attachThrottledListener=function(e,t,r,n){gt(e,"eventTarget").exists(),gt(t,"listenerType").exists(),this.attachedListener={eventTarget:e,listenerType:t,pollingInterval:r,callback:n},e.addEventListener(t,this.executeThrottledEvent)},e.prototype.removeThrottledListener=function(){null!==this.attachedListener&&(this.attachedListener.eventTarget.removeEventListener(this.attachedListener.listenerType,this.executeThrottledEvent),this.attachedListener=null)},e}(),_t=!1;try{var wt=new URL("b","http://a");wt.pathname="c%20d",_t="http://a/c%20d"===wt.href}catch(e){}if(_t)lt=URL;else{var St=void 0,Et=/[a-zA-Z]/,Tt=/[a-zA-Z0-9\+\-\.]/,Ot={ftp:21,file:0,gopher:70,http:80,https:443,ws:80,wss:443},Pt={"%2e":".",".%2e":"..","%2e.":"..","%2e%2e":".."};if(lt=function(){function n(e,t){this._isInvalid=!1,this._isRelative=!1,void 0===t||t instanceof n||(t=new n(String(t))),this._url=e,this.clear();var r=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");this.parse(r,null,t)}return n.prototype.isRelativeScheme=function(e){return void 0!==Ot[e]},n.prototype.invalid=function(){this.clear(),this._isInvalid=!0},n.prototype.IDNAToASCII=function(e){return""==e&&this.invalid(),e.toLowerCase()},n.prototype.percentEscape=function(e){var t=e.charCodeAt(0);return 32<t&&t<127&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)},n.prototype.percentEscapeQuery=function(e){var t=e.charCodeAt(0);return 32<t&&t<127&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)},n.prototype.parse=function(e,t,r){var n=t||"scheme start",i=0,o="",a=!1,s=!1;e:for(;(e[i-1]!=St||0==i)&&!this._isInvalid;){var u=e[i];switch(n){case"scheme start":if(!u||!Et.test(u)){if(t)break e;o="",n="no scheme";continue}o+=u.toLowerCase(),n="scheme";break;case"scheme":if(u&&Tt.test(u))o+=u.toLowerCase();else{if(':'!=u){if(t){if(St==u)break e;break e}o='',i=0,n='no scheme';continue}if(this._scheme=o,o='',t)break e;this.isRelativeScheme(this._scheme)&&(this._isRelative=!0),n='file'==this._scheme?'relative':this._isRelative&&r&&r._scheme==this._scheme?'relative or authority':this._isRelative?'authority first slash':'scheme data'}break;case'scheme data':'?'==u?(this._query='?',n='query'):'#'==u?(this._fragment='#',n='fragment'):St!=u&&'\t'!=u&&'\n'!=u&&'\r'!=u&&(this._schemeData+=this.percentEscape(u));break;case'no scheme':if(r&&this.isRelativeScheme(r._scheme)){n='relative';continue}this.invalid();break;case'relative or authority':if('/'!=u||'/'!=e[i+1]){n='relative';continue}n='authority ignore slashes';break;case'relative':if(this._isRelative=!0,'file'!=this._scheme&&(this._scheme=r._scheme),St==u){this._host=r._host,this._port=r._port,this._path=r._path.slice(),this._query=r._query,this._username=r._username,this._password=r._password;break e}if('/'==u||'\\'==u)n='relative slash';else if('?'==u)this._host=r._host,this._port=r._port,this._path=r._path.slice(),this._query='?',this._username=r._username,this._password=r._password,n='query';else{if('#'!=u){var l=e[i+1],c=e[i+2];('file'!=this._scheme||!Et.test(u)||':'!=l&&'|'!=l||St!=c&&'/'!=c&&'\\'!=c&&'?'!=c&&'#'!=c)&&(this._host=r._host,this._port=r._port,this._username=r._username,this._password=r._password,this._path=r._path.slice(),this._path.pop()),n='relative path';continue}this._host=r._host,this._port=r._port,this._path=r._path.slice(),this._query=r._query,this._fragment='#',this._username=r._username,this._password=r._password,n='fragment'}break;case'relative slash':if('/'!=u&&'\\'!=u){'file'!=this._scheme&&(this._host=r._host,this._port=r._port,this._username=r._username,this._password=r._password),n='relative path';continue}n='file'==this._scheme?'file host':'authority ignore slashes';break;case'authority first slash':if('/'!=u){n='authority ignore slashes';continue}n='authority second slash';break;case'authority second slash':if(n='authority ignore slashes','/'!=u)continue;break;case'authority ignore slashes':if('/'!=u&&'\\'!=u){n='authority';continue}break;case'authority':if('@'==u){a&&(o+='%40'),a=!0;for(var f=0;f<o.length;f++){var p=o[f];if('\t'!=p&&'\n'!=p&&'\r'!=p)if(':'!=p||null!==this._password){var d=this.percentEscape(p);null!==this._password?this._password+=d:this._username+=d}else this._password=''}o=''}else{if(St==u||'/'==u||'\\'==u||'?'==u||'#'==u){i-=o.length,o='',n='host';continue}o+=u}break;case'file host':if(St==u||'/'==u||'\\'==u||'?'==u||'#'==u){2!=o.length||!Et.test(o[0])||':'!=o[1]&&'|'!=o[1]?(0==o.length||(this._host=this.IDNAToASCII(o),o=''),n='relative path start'):n='relative path';continue}'\t'==u||'\n'==u||'\r'==u||(o+=u);break;case'host':case'hostname':if(':'!=u||s){if(St==u||'/'==u||'\\'==u||'?'==u||'#'==u){if(this._host=this.IDNAToASCII(o),o='',n='relative path start',t)break e;continue}'\t'!=u&&'\n'!=u&&'\r'!=u&&('['==u?s=!0:']'==u&&(s=!1),o+=u)}else if(this._host=this.IDNAToASCII(o),o='',n='port','hostname'==t)break e;break;case'port':if(/[0-9]/.test(u))o+=u;else{if(St==u||'/'==u||'\\'==u||'?'==u||'#'==u||t){if(''!=o){var h=parseInt(o,10);h!=Ot[this._scheme]&&(this._port=h+''),o=''}if(t)break e;n='relative path start';continue}'\t'==u||'\n'==u||'\r'==u||this.invalid()}break;case'relative path start':if(n='relative path','/'!=u&&'\\'!=u)continue;break;case'relative path':var m;if(St!=u&&'/'!=u&&'\\'!=u&&(t||'?'!=u&&'#'!=u))'\t'!=u&&'\n'!=u&&'\r'!=u&&(o+=this.percentEscape(u));else(m=Pt[o.toLowerCase()])&&(o=m),'..'==o?(this._path.pop(),'/'!=u&&'\\'!=u&&this._path.push('')):'.'==o&&'/'!=u&&'\\'!=u?this._path.push(''):'.'!=o&&('file'==this._scheme&&0==this._path.length&&2==o.length&&Et.test(o[0])&&'|'==o[1]&&(o=o[0]+':'),this._path.push(o)),o='','?'==u?(this._query='?',n='query'):'#'==u&&(this._fragment='#',n='fragment');break;case'query':t||'#'!=u?St!=u&&'\t'!=u&&'\n'!=u&&'\r'!=u&&(this._query+=this.percentEscapeQuery(u)):(this._fragment='#',n='fragment');break;case'fragment':St!=u&&'\t'!=u&&'\n'!=u&&'\r'!=u&&(this._fragment+=u)}i++}},n.prototype.clear=function(){this._scheme="",this._schemeData="",this._username="",this._password="",this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1},n.prototype.toString=function(){return this.href},n.prototype.toJSON=function(){return this.href},Object.defineProperty(n.prototype,"href",{get:function(){if(this._isInvalid)return this._url;var e="";return""==this._username&&""==this._password||(e=this._username+(""!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set:function(e){this.clear(),this.parse(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._scheme+":"},set:function(e){this._isInvalid||this.parse(e+":","scheme start")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"host",{get:function(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set:function(e){!this._isInvalid&&this._isRelative&&this.parse(e,"host")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hostname",{get:function(){return this._host},set:function(e){!this._isInvalid&&this._isRelative&&this.parse(e,"hostname")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"port",{get:function(){return this._port},set:function(e){!this._isInvalid&&this._isRelative&&this.parse(e,"port")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pathname",{get:function(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set:function(e){!this._isInvalid&&this._isRelative&&(this._path=[],this.parse(e,"relative path start"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"search",{get:function(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set:function(e){!this._isInvalid&&this._isRelative&&((this._query="?")==e[0]&&(e=e.slice(1)),this.parse(e,"query"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hash",{get:function(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set:function(e){this._isInvalid||((this._fragment="#")==e[0]&&(e=e.slice(1)),this.parse(e,"fragment"))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"username",{get:function(){return this._username},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"password",{get:function(){return this._password},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"origin",{get:function(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this._scheme+"://"+e:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"searchParams",{get:function(){return null},enumerable:!0,configurable:!0}),n.createObjectURL=function(e){return""},n.revokeObjectURL=function(e){},n}(),"undefined"!=typeof URL){var It=URL;It&&(lt.createObjectURL=function(e){return It.createObjectURL.apply(It,arguments)},lt.revokeObjectURL=function(e){It.revokeObjectURL(e)})}}var Rt,At,kt=lt,Ct=function(){function e(){}return e.wwwFormUrlEncode=function(e){return L.pairs(e).map(function(e){return e.map(function(e){return encodeURIComponent(e).replace(/%20/g,"+")}).join("=")}).join("&")},e.appendQueryParams=function(e,t){var r=e.search,n=L.pairs(t).reduce(function(e,t){return e+(""===e?"?":"&")+t[0]+"="+t[1]},r);e.search=n},e.removeQueryParams=function(e,t){var r=e.search;"?"===r[0]&&(r=r.slice(1));for(var n=r.split("&"),i=0;i<n.length;i++){var o=t[n[i].split("=")[0]];null!=o&&(n.splice(i,1),i--)}e.search=n.join("&")},e}(),Dt=function(){function e(){}return e.prototype.decode=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=[],n=0;n<t.length;){var i=0,o=0,a=t[n++];if(240==(248&a))i=3,o=7&a;else if(224==(240&a))i=2,o=15&a;else if(192==(224&a))i=1,o=31&a;else{if(0!=(128&a))throw new TypeError("Failed to decode value: "+a.toString(16));i=0,o=127&a}for(;0<i&&n<t.length;)o<<=6,o|=63&t[n++],i--;if(0<i)throw new TypeError("Failed to decode value");if(65536<=o){var s=56320|1023&(o-=65536),u=55296|o>>10&1023;r.push(String.fromCharCode(u,s))}else r.push(String.fromCharCode(o))}return r.join("")},e}(),xt="undefined"!=typeof TextDecoder?function(){return new TextDecoder("utf-8")}:Dt,Mt={},Lt=function(){function e(){}return e.v4=function(){for(var e=Mt.randomEngine,t=new Uint8Array(16),r=0;r<16;r++)t[r]=256*e.getRandom();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,this.bytesToUuid(t)},e.bytesToUuid=function(e){for(var t=[],r=0;r<256;r++)t[r]=(r+256).toString(16).substr(1);var n=0;return[t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],"-",t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]],t[e[n++]]].join("")},e}(),Nt=function(){function e(){}return e.validate=function(e,t){if(null!=e&&null!=t)for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];e.hasOwnProperty(i)&&null!=e[i]&&("object"==typeof e[i]?this.validate(e[i],t[i]):"string"!=typeof e[i]&&"number"!=typeof e[i]||null==t[i]||(e[i]=t[i].constrain(e[i])))}},e}(),Wt=de.of("Version"),Ut="unknown",jt={AmazonUrlCreator:Le,CookieStorage:We,Display:Ue,DOMUtils:Fe,EnumUtils:Be,EphemeralJSLogger:qe,FunctionThrottler:ze,HTMLElementUtils:$e,IPAddress:rt,LocalStorage:at,MimeTypeParser:ct,NumberValidator:ft,ResourceAcquirer:pt,SessionStorage:ht,Strings:yt,StringValidator:vt,ThrottledEventListener:bt,URL:kt,URLUtils:Ct,Utf8TextDecoder:xt,UUIDGenerator:Lt,ValidationUtils:Nt,Version:function(){function i(e,t){Wt(e,"segments").exists(),Wt(0<e.length,"length > 0").is.true(),Wt(t,"str").exists(),this.segments=e,this.str=t}return i.fromNumber=function(e){return Wt(e,"version").exists(),new i([e],e.toString())},i.fromString=function(e){return Wt(e,"version").exists(),new i(i.split(e),e)},i.createUnknownVersion=function(){return i.fromString(Ut)},i.prototype.isUnknownVersion=function(){return this.str===Ut},i.prototype.toString=function(){return this.str},i.prototype.equals=function(e){return 0===this.compareTo(e)},i.prototype.isSubversionOf=function(e){return 0===this.compareTo(e,!0)},i.prototype.compareTo=function(e,t){if(void 0===t&&(t=!1),this===e)return 0;if(null==e)return 1;if(this.str===Ut&&e.str===Ut)return 0;for(var r=Math.min(this.segments.length,e.segments.length),n=0;n<r;n++){if(this.segments[n]<e.segments[n])return-1;if(this.segments[n]>e.segments[n])return 1}return i.isGreaterThanZero(e.segments.slice(this.segments.length))?-1:t?0:i.isGreaterThanZero(this.segments.slice(e.segments.length))?1:0},i.isGreaterThanZero=function(e){for(var t=0;t<e.length;t++)if(L.isString(e[t])&&0<e[t].length||L.isNumber(e[t])&&0<e[t])return!0;return!1},i.split=function(e){var t=e.toLowerCase().match(/\d+|[a-z]+/g);return null!==t?L.map(t,function(e){return/^\d+$/.test(e)?parseInt(e):e}):[]},i}()};(At=Rt||(Rt={}))[At.Unknown=0]="Unknown",At[At.AlexaWebMediaPlayer=1]="AlexaWebMediaPlayer",At[At.AmazonWebView=2]="AmazonWebView",At[At.Android=3]="Android",At[At.AppleWebKit=4]="AppleWebKit",At[At.BlackBerry=5]="BlackBerry",At[At.Chrome=6]="Chrome",At[At.Chromium=7]="Chromium",At[At.Edge=8]="Edge",At[At.EdgeNext=9]="EdgeNext",At[At.Firefox=10]="Firefox",At[At.Firefox64=11]="Firefox64",At[At.IE=12]="IE",At[At.Opera=13]="Opera",At[At.Safari=14]="Safari",At[At.SeaMonkey=15]="SeaMonkey",At[At.Silk=16]="Silk";var Ft,Vt,Bt=Rt,qt=jt.Version,Ht=function(){function a(e,t){this.type=e,this.version=null!=t?t:null}return a.fromUserAgent=function(e){for(var t=0,r=a.REGEXES;t<r.length;t++){var n=r[t],i=n.regex.exec(e);if(i){var o=i[1]?qt.fromString(i[1]):null;return new a(n.type,o)}}return new a(Bt.Unknown)},a.prototype.getType=function(){return this.type},a.prototype.getVersion=function(){return this.version},a.prototype.toString=function(){var e=Bt[this.type];return null!==this.version&&(e+=" "+this.version),e},a.prototype.equals=function(e){return this.type===e.type&&(null===this.version?null===e.version:this.version.equals(e.version))},a.UNKNOWN=new a(Bt.Unknown),a.REGEXES=[{regex:/(?:Camino|Chimera|hpwOS|webOS|Play[Ss]tation)\//,type:Bt.Unknown},{regex:/Silk\/(\d+[.0-9\-]+)/,type:Bt.Silk},{regex:/(?:BlackBerry|BB10).*Version\/(\d+[.0-9]*)/,type:Bt.BlackBerry},{regex:/(?:OPR\/|Opera |Opera.*Version\/)(\d+[.0-9]*)/,type:Bt.Opera},{regex:/(?:Edg)\/(\d+[.0-9]*)/,type:Bt.EdgeNext},{regex:/(?:Edge)\/(\d+[.0-9]*)/,type:Bt.Edge},{regex:/(?:MSIE |Trident.*rv:)(\d+[.0-9]*)/,type:Bt.IE},{regex:/Chromium\/(\d+[.0-9]*)/,type:Bt.Chromium},{regex:/(?:Chrome|CriOS)\/(\d+[.0-9]*)/,type:Bt.Chrome},{regex:/SeaMonkey\/(\d+[.0-9]*)/,type:Bt.SeaMonkey},{regex:/x64;.*Firefox\/(\d+[.0-9]*)/,type:Bt.Firefox64},{regex:/Firefox\/(\d+[.0-9]*)/,type:Bt.Firefox},{regex:/(?:Amazon.com|Windowshop|Amazon)\/(\d+[.0-9]*)/,type:Bt.AmazonWebView},{regex:/Android[ \-/](\d+[.0-9a-z\-]*)/,type:Bt.Android},{regex:/Version\/(\d+[.0-9]*).*Safari/,type:Bt.Safari},{regex:/applewebkit\/(\d+[.0-9]*)/i,type:Bt.AppleWebKit},{regex:/AlexaWebMediaPlayer[ \-/](\d+[.0-9a-z\-]*)/,type:Bt.AlexaWebMediaPlayer}],a}();(Vt=Ft||(Ft={}))[Vt.Unknown=0]="Unknown",Vt[Vt.Android=1]="Android",Vt[Vt.BlackBerry=2]="BlackBerry",Vt[Vt.ChromeOS=3]="ChromeOS",Vt[Vt.FirefoxOS=4]="FirefoxOS",Vt[Vt.GoogleTV=5]="GoogleTV",Vt[Vt.iOS=6]="iOS",Vt[Vt.Linux=7]="Linux",Vt[Vt.Mac=8]="Mac",Vt[Vt.MacPPC=9]="MacPPC",Vt[Vt.Windows=10]="Windows",Vt[Vt.WindowsPhone=11]="WindowsPhone",Vt[Vt.WindowsRT=12]="WindowsRT",Vt[Vt.XboxOne=13]="XboxOne";var Kt,Gt,Xt,zt,Qt=Ft,Jt=a&&a.__extends||(Kt=function(e,t){return(Kt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Kt(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Yt=jt.Version;(zt=Xt||(Xt={}))[zt.Windows2000=0]="Windows2000",zt[zt.WindowsXP=1]="WindowsXP",zt[zt.WindowsVista=2]="WindowsVista",zt[zt.Windows7=3]="Windows7",zt[zt.Windows8=4]="Windows8",zt[zt.Windows8_1=5]="Windows8_1",zt[zt.Windows10=6]="Windows10";var Zt,$t={"5.0":Xt.Windows2000,5.1:Xt.WindowsXP,5.2:Xt.WindowsXP,"6.0":Xt.WindowsVista,6.1:Xt.Windows7,6.2:Xt.Windows8,6.3:Xt.Windows8_1,6.4:Xt.Windows10,"10.0":Xt.Windows10,10.1:Xt.Windows10,10.2:Xt.Windows10},er=((Gt={})[Xt.Windows2000]="2000",Gt[Xt.WindowsXP]="XP",Gt[Xt.WindowsVista]="Vista",Gt[Xt.Windows7]="7",Gt[Xt.Windows8]="8",Gt[Xt.Windows8_1]="8.1",Gt[Xt.Windows10]="10",Gt),tr=function(t){function r(e){return t.call(this,[e],er[e])||this}return Jt(r,t),r.fromKernelVersion=function(e){var t=$t[e];if(null==t)throw new Error("Unexpected Windows kernel version: "+e);return new r(t)},r.WINDOWS_2000=new r(Xt.Windows2000),r.WINDOWS_XP=new r(Xt.WindowsXP),r.WINDOWS_VISTA=new r(Xt.WindowsVista),r.WINDOWS_7=new r(Xt.Windows7),r.WINDOWS_8=new r(Xt.Windows8),r.WINDOWS_8_1=new r(Xt.Windows8_1),r.WINDOWS_10=new r(Xt.Windows10),r}(Yt),rr=jt.Version,nr=((Zt={})[Qt.Unknown]="Unknown",Zt[Qt.Android]="Android",Zt[Qt.BlackBerry]="BlackBerry",Zt[Qt.ChromeOS]="Chrome OS",Zt[Qt.FirefoxOS]="Firefox OS",Zt[Qt.GoogleTV]="Google TV",Zt[Qt.iOS]="iOS",Zt[Qt.Linux]="Linux",Zt[Qt.Mac]="Mac OS X",Zt[Qt.MacPPC]="Mac OS PPC",Zt[Qt.Windows]="Windows",Zt[Qt.WindowsPhone]="Windows Phone",Zt[Qt.WindowsRT]="Windows RT",Zt[Qt.XboxOne]="Xbox One",Zt),ir=function(){function o(e,t,r){this.family=e,this.version=null!=t?t:rr.createUnknownVersion(),this.kernelVersion=null!=r?r:this.version}return o.fromUserAgent=function(e){for(var t=0,r=o.REGEXES;t<r.length;t++){var n=r[t],i=n.regex.exec(e);if(i)return n.handler(i,e)}return new o(Qt.Unknown)},o.prototype.getFamily=function(){return this.family},o.prototype.getFamilyName=function(){return nr[this.family]||null},o.prototype.getVersion=function(){return this.version},o.prototype.getKernelVersion=function(){return this.kernelVersion},o.prototype.toString=function(){var e=nr[this.family];return null===this.version||this.version.isUnknownVersion()||(e+=" "+this.version),e},o.prototype.equals=function(e){return this.family===e.family&&(null===this.version?null===e.version:this.version.equals(e.version))},o.UNKNOWN=new o(Qt.Unknown),o.MAC_OS_X_YOSEMITE=new o(Qt.Mac,rr.fromString("10.10")),o.MAC_OS_VERSION_CAP=new o(Qt.Mac,rr.fromString("10.15.7")),o.WINDOWS_2000=new o(Qt.Windows,tr.WINDOWS_2000),o.WINDOWS_XP=new o(Qt.Windows,tr.WINDOWS_XP),o.WINDOWS_VISTA=new o(Qt.Windows,tr.WINDOWS_VISTA),o.WINDOWS_7=new o(Qt.Windows,tr.WINDOWS_7),o.WINDOWS_8=new o(Qt.Windows,tr.WINDOWS_8),o.WINDOWS_8_1=new o(Qt.Windows,tr.WINDOWS_8_1),o.WINDOWS_10=new o(Qt.Windows,tr.WINDOWS_10),o.REGEXES=[{regex:/Windows ?Mobile|Xbox(?!.*One)|Play[Ss]tation/,handler:function(){return new o(Qt.Unknown)}},{regex:/Windows Phone(?: (?:OS[ /])?(\d+[.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1]):null;return new o(Qt.WindowsPhone,t)}},{regex:/Xbox One(?: (?:OS[ /])?(\d+[.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1]):null;return new o(Qt.XboxOne,t)}},{regex:/(?:BB10|BlackBerry)(?:.*Version\/(\d+[.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1]):null;return new o(Qt.BlackBerry,t)}},{regex:/GoogleTV(?:[ /]([0-9a-b]+[.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1]):null;return new o(Qt.GoogleTV,t)}},{regex:/Android(?:[ \-/](\d+[.0-9a-z\-]*))?|\bSilk\b/,handler:function(e){var t=e[1]?rr.fromString(e[1]):null;return new o(Qt.Android,t)}},{regex:/CrOS(?: i686 (\d+[.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1]):null;return new o(Qt.ChromeOS,t)}},{regex:/(?:iPad|iPhone|iPod)(?:.*OS (\d+[_.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1].replace(/_/g,".")):null;return new o(Qt.iOS,t)}},{regex:/Intel Mac OS X(?: (\d+[_.0-9]*))?/,handler:function(e,t){var r=e[1]?rr.fromString(e[1].replace(/_/g,".")):null;return 2<navigator.maxTouchPoints?new o(Qt.iOS,r):new o(Qt.Mac,r)}},{regex:/PPC Mac OS(?: X)?(?: (\d+[_.0-9]*))?/,handler:function(e){var t=e[1]?rr.fromString(e[1].replace(/_/g,".")):null;return new o(Qt.MacPPC,t)}},{regex:/Windows NT(?: (5\.[012]|6\.[01234]))?.*ARM/,handler:function(e){var t=e[1],r=t?tr.fromKernelVersion(t):null,n=t?rr.fromString(t):null;return new o(Qt.WindowsRT,r,n)}},{regex:/Windows NT(?: (5\.[012]|6\.[01234]|10\.[012]))?/,handler:function(e){var t=e[1],r=t?tr.fromKernelVersion(t):null,n=t?rr.fromString(t):null;return new o(Qt.Windows,r,n)}},{regex:/Linux/,handler:function(){return new o(Qt.Linux)}},{regex:/Mozilla\/5.0 \((?:Mobile|Tablet); (?:[0-9A-Za-z .\-]+; )?rv:\d+[.0-9]*\) Gecko\/\d+[.0-9]* Firefox\/\d+[.0-9]*/,handler:function(){return new o(Qt.FirefoxOS)}}],o}(),or={Browser:Ht,BrowserType:Bt,OperatingSystem:ir,OperatingSystemFamily:Qt,WindowsVersion:tr,getBrowser:function(e){return void 0===e&&(e=navigator.userAgent),Ht.fromUserAgent(e)},getOperatingSystem:function(e){return void 0===e&&(e=navigator.userAgent),ir.fromUserAgent(e)}},ar=t(function(e,t){var r,n,i,o,a,s,u,l,c,f;Object.defineProperty(t,"__esModule",{value:!0});var p="2c3c3654-ac62-46a9-a36e-76e1ff64a679",d=((r={})[or.BrowserType.AlexaWebMediaPlayer]={},r[or.BrowserType.AmazonWebView]={},r[or.BrowserType.Android]={},r[or.BrowserType.AppleWebKit]={},r[or.BrowserType.Chrome]=((n={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(69)},osFamily:or.OperatingSystemFamily.Windows,osVersion:{min:or.WindowsVersion.WINDOWS_7}},{browserRange:{min:jt.Version.fromNumber(69)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}}],n[p+"|DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(42)}}],n),r[or.BrowserType.Chromium]=((i={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(69)},osFamily:or.OperatingSystemFamily.Windows,osVersion:{min:or.WindowsVersion.WINDOWS_7}},{browserRange:{min:jt.Version.fromNumber(69)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}}],i[p+"|DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(42)}}],i),r[or.BrowserType.Edge]=((o={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(15)}}],o["DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(15)}}],o),r[or.BrowserType.EdgeNext]=((a={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(64)}}],a["DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(64)}}],a),r[or.BrowserType.Firefox]=((s={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(60)},osFamily:or.OperatingSystemFamily.Windows,osVersion:{min:or.WindowsVersion.WINDOWS_7}},{browserRange:{min:jt.Version.fromNumber(60)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}}],s[p+"|DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(53)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}},{browserRange:{min:jt.Version.fromNumber(42)}}],s),r[or.BrowserType.Firefox64]=((u={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(60)},osFamily:or.OperatingSystemFamily.Windows,osVersion:{min:or.WindowsVersion.WINDOWS_7}},{browserRange:{min:jt.Version.fromNumber(60)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}}],u[p+"|DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(53)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}},{browserRange:{min:jt.Version.fromNumber(42)}}],u),r[or.BrowserType.Opera]=((l={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(37)},osFamily:or.OperatingSystemFamily.Windows,osVersion:{min:or.WindowsVersion.WINDOWS_7}},{browserRange:{min:jt.Version.fromNumber(37)},osFamily:or.OperatingSystemFamily.Android,osVersion:{min:jt.Version.fromString("4.4.3")}}],l[p+"|DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(32)}}],l),r[or.BrowserType.Safari]=((c={})["DRM:YES"]=[{browserRange:{min:jt.Version.fromNumber(10)},osFamily:or.OperatingSystemFamily.Mac,osVersion:{min:jt.Version.fromString("10.12.1")}}],c["DRM:NO"]=[{browserRange:{min:jt.Version.fromNumber(8)}}],c),r[or.BrowserType.Silk]=((f={})["DRM:YES"]=[{browserRange:!1}],f),r);t.DefaultBrowserDenylist=d});e(ar);ar.DefaultBrowserDenylist;var sr=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.browser=or.getBrowser(),this.browserType=this.browser.getType(),this.os=or.getOperatingSystem(),this.metricsReporter=new De.TinyMetricsReporter(e.marketplaceId,e.clientId)}return e.prototype.getBasicPlayerCapabilities=function(e){if(null==ar.DefaultBrowserDenylist[this.browserType])return this.metricsReporter.reportUnsupportedReason(Ae.UnsupportedReason.UNSUPPORTED_BROWSER),z.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:Ae.UnsupportedReason.UNSUPPORTED_BROWSER});var t=this.getDenylistEntry(e);if(null!=t){if(this.isDenylistedOs(t))return this.metricsReporter.reportUnsupportedReason(Ae.UnsupportedReason.UNSUPPORTED_OS),z.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:Ae.UnsupportedReason.UNSUPPORTED_OS});if(this.isDenylistedBrowser(t))return this.metricsReporter.reportUnsupportedReason(Ae.UnsupportedReason.BROWSER_OUT_OF_DATE),z.Promise.resolve({supportsPlayback:!1,supportsDrm:!1,unsupportedReason:Ae.UnsupportedReason.BROWSER_OUT_OF_DATE})}return z.Promise.resolve({supportsPlayback:!0,supportsDrm:!0,unsupportedReason:null})},e.prototype.isInRange=function(e,t){return null!=t.min&&0<t.min.compareTo(e)||null!=t.max&&t.max.compareTo(e)<0},e.prototype.isDenylistedOs=function(e){return null!=e.osFamily&&(!1===e.osVersion||this.isInRange(this.os.getVersion(),e.osVersion))},e.prototype.isDenylistedBrowser=function(e){return!1===e.browserRange||this.isInRange(this.browser.getVersion(),e.browserRange)},e.prototype.keyString=function(e){return"DRM:"+(e.requiresDrm?"YES":"NO")},e.prototype.getFirst=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,i=t;n<i.length;n++){var o=i[n];if(null!=e[o])return e[o]}return null},e.prototype.getDenylistEntry=function(e){var t=this,r=ar.DefaultBrowserDenylist[this.browserType];if(null==r)return null;var n=this.getFirst(r,this.keyString({requiresDrm:e}),this.keyString({requiresDrm:!0}));if(null==n)return null;var i=L.max(n,function(e){return e.osFamily===t.os.getFamily()?2:null==e.osFamily?1:-1/0});return L.isObject(i)?i:null},e}();t.PlayerSDKDeviceDenylist=r});e(sr);sr.PlayerSDKDeviceDenylist;var ur=t(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=s),this.version="1.0.0",this.Features=R.WebPlayerSDKFeatures,this.authContext=null,this.webPlayerSDK=null,this.sdkAcquisition=null,this.cancelSdkAcquisition=null;var r=ve.QueryString.getParameter("playerDebug");!0!==r&&1!==r&&!0!==e.debug||(e.debug=!0,t.useDefaults()),this.eventEmitter=new $.EventEmitter,this.playerSDKDeviceDenylist=new sr.PlayerSDKDeviceDenylist(e),this.playerSDKConfig=e,this.playerSDKConfig.marketplaceId=null==this.playerSDKConfig.marketplaceId?pe.MarketplaceID.US:this.playerSDKConfig.marketplaceId,this.bundleAcquirer=new xe.BundleAcquirer(this.playerSDKConfig)}return e.prototype.destroy=function(){null!=this.webPlayerSDK&&(this.webPlayerSDK.destroy(),this.webPlayerSDK=null),null!=this.cancelSdkAcquisition&&(this.cancelSdkAcquisition(),this.cancelSdkAcquisition=null,this.sdkAcquisition=null)},e.prototype.getFeature=function(e,t){var r=this;if(null!=this.webPlayerSDK)return this.getFeatureFromSDK(e,t);if(null==this.sdkAcquisition){var n=z.CancelToken.source(),i=n.token,o=n.cancel;this.cancelSdkAcquisition=o,this.sdkAcquisition=this.bundleAcquirer.acquireSDK().then(function(e){if(i.requested)throw ke.LoaderErrorCreator.createLoaderError();if(null==e)throw ke.LoaderErrorCreator.createLoaderError();r.webPlayerSDK=new e(r.playerSDKConfig),null!=r.authContext&&r.webPlayerSDK.setAuthContext(r.authContext)}).catch(function(e){return r.eventEmitter.emit("LoadError",e),z.Promise.reject(e)})}return this.sdkAcquisition.then(function(){return r.getFeatureFromSDK(e,t)})},e.prototype.setAuthContext=function(e){null!=this.webPlayerSDK?this.webPlayerSDK.setAuthContext(e):this.authContext=e},e.prototype.on=function(e,t){this.eventEmitter.on(e,t)},e.prototype.once=function(e,t){this.eventEmitter.once(e,t)},e.prototype.off=function(e,t){this.eventEmitter.off(e,t)},e.prototype.isPlayerFeature=function(e){return e===R.WebPlayerSDKFeatures.AmazonVideoPlayer||e===R.WebPlayerSDKFeatures.ChromelessPlayer||e===R.WebPlayerSDKFeatures.GCastPlayer||e===R.WebPlayerSDKFeatures.Player},e.prototype.getFeatureFromSDK=function(t,r){var n=this;if(null==this.webPlayerSDK)return z.Promise.reject(ke.LoaderErrorCreator.createLoaderError());if(!this.isPlayerFeature(t))return this.webPlayerSDK.getFeature(t,r);var e=r,i=!1;return null!=e&&null!=e.requiredCapabilities&&null!=e.requiredCapabilities.supportsDrm&&(i=e.requiredCapabilities.supportsDrm),this.playerSDKDeviceDenylist.getBasicPlayerCapabilities(i).then(function(e){return e.supportsPlayback?n.webPlayerSDK.getFeature(t,r):z.Promise.reject(ke.LoaderErrorCreator.createLoaderError(e.unsupportedReason,i))})},e}();t.WebPlayerSDKLoader=r});e(ur);ur.WebPlayerSDKLoader;return window.WebPlayerSDK=ur.WebPlayerSDKLoader}();